{"version":3,"sources":["../../../index.js","SayApp.js","serviceWorker.js","index.js","../../../lib/queue.js","../../../lib/monauralscope.js","../../../lib/say.js","../../../lib/profiles.js"],"names":["module","exports","Say","setWorkers","say","language","SayApp","sayText","autoplay","document","location","search","startsWith","atob","decodeURIComponent","substring","length","state","isSpeaking","inputRef","React","createRef","onSubmit","e","preventDefault","this","ref","size","placeholder","value","onChange","setState","target","onClick","text","current","btext","window","btoa","history","pushState","encodeURIComponent","console","log","profile","then","Component","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","_EventEmitter","SpeakerQueue","speak","_this","call","_queue","speaker","key","speech","push","_speakNext","_this2","next","shift","getWorkerAudioData","options","audioContext","source","onStart","scope","loadAudioData","onStop","setTimeout","_onEnded","emit","MonauralScope","canvas","width","height","meter","mediaStreamSource","_draw","draw","bind","isRecording","setTheme","lineWidth","strokeColor","clipColor","fillColor","bgOnColor","bgOffColor","dotColor","dotSize","background","theme","clipLevel","averaging","clipLag","processor","createScriptProcessor","onaudioprocess","event","x","buf","inputBuffer","getChannelData","bufLength","sum","i","Math","abs","clipping","lastClip","performance","now","rms","sqrt","volume","max","maxVolume","connect","destination","checkClipping","shutdown","disconnect","startRecording","stopRecording","close","isDrawing","successcb","errorcb","_this3","AudioContext","webkitAudioContext","success","stream","createMediaStreamSource","createAudioMeter","startDrawing","fail","getUserMedia","mediaDevices","Error","alert","callback","_this4","onended","isPlaying","buffer","stop","stopDrawing","start","ctx","getContext","fillStyle","fillRect","clearRect","maxsize","min","beginPath","arc","PI","fill","closePath","error","strokeStyle","_maxsize","_size","stroke","requestAnimationFrame","getAudioContext","name","lang","profiles","defaultProfile","addProfile","setProfile","engine","setLanguage","visualizer","setVisualizer","vis","getLanguageId","profileName","v","Object","assign","slow","speed","fast","low","pitch","high","voice","delay","Promise","resolve","audioBuffer","gainNode","createGain","gain","setValueAtTime","duration","linearRampToValueAtTime","didexit","toLowerCase","borgGetAudioData","workerPath","workers","sam","espeak","l","path","worker","Worker","addEventListener","data","rawdata","createBufferSource","rawAudioData","createBuffer","_i","decodeAudioData","voptions","processOptions","postMessage","cmd","replacements","forEach","replacement","from","to","replace","RegExp","type","p","voices","parallel","err","results","maxLength","maxDuration","sampleRate","result","_audioContext","channgelToggle","leftInBuffer","leftOutBuffer","rightInBuffer","rightOutBuffer","_i2","variants","languageIds","indexOf","sayQueue","queue","clearQueue","on","once","amplitude","wordgap","variant","throat","mouth"],"mappings":"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","file":"static/js/main.628d0546.chunk.js","sourcesContent":["module.exports = require('./lib/say');","import React, {Component} from 'react';\nimport Say from 'jaxcore-say';\n\n\nSay.setWorkers({\n\t'espeak': 'webworkers/espeak-all-worker.js',\n\t'sam': 'webworkers/sam-worker.js'\n});\n\nvar say = new Say({\n\tlanguage: 'en'\n});\n\n\nclass SayApp extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tlet sayText;\n\t\tlet autoplay = false;\n\t\t// the autoplay feature hides the url in base64 encoding (send friends the url)\n\t\tif (document.location.search.startsWith('?say=')) {\n\t\t\tsayText = atob(decodeURIComponent(document.location.search.substring('?say='.length)));\n\t\t\tautoplay = true;\n\t\t}\n\t\telse sayText = \"we are borg... resistance is futile.... your technological and biological distinctiveness will be added to our own\"\n\t\t\n\t\tthis.state = {\n\t\t\tisSpeaking: false,\n\t\t\tsayText,\n\t\t\tautoplay\n\t\t};\n\t\t\n\t\tthis.inputRef = React.createRef();\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h3>Borg Text-to-Speech Example:</h3>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<form onSubmit={e => {\n\t\t\t\t\t\te.preventDefault(); return false;\n\t\t\t\t\t}}>\n\t\t\t\t\t\t\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.autoplay? '' : (<input ref={this.inputRef} size=\"70\" placeholder=\"Type something then press Enter\"\n\t\t\t\t\t\t\t\t   value={this.state.sayText} onChange={e => this.setState({sayText: e.target.value})}/>)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<button onClick={e => this.sayText()}>Say</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\t<div>Are the Borg Speaking? {this.state.isSpeaking ? 'YES' : 'NO'}</div>\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\tsayText() {\n\t\tconst text = this.state.autoplay? this.state.sayText : this.inputRef.current.value;\n\t\tthis.setState({\n\t\t\tisSpeaking: true,\n\t\t\tautoplay: false\n\t\t}, () => {\n\t\t\t\n\t\t\tlet btext = window.btoa(text);\n\t\t\twindow.history.pushState(null, null, '?say='+encodeURIComponent(btext));\n\t\t\t\n\t\t\tconsole.log('Borg: started');\n\t\t\t\n\t\t\tsay.say(text, {profile: 'Borg'}).then(() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisSpeaking: false\n\t\t\t\t});\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t});\n\t}\n}\n\nexport default SayApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SayApp from './SayApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<SayApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import _classCallCheck from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport EventEmitter from \"events\";\n\nvar SpeakerQueue =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(SpeakerQueue, _EventEmitter);\n\n  function SpeakerQueue(speak) {\n    var _this;\n\n    _classCallCheck(this, SpeakerQueue);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SpeakerQueue).call(this));\n    _this._queue = [];\n    _this.speaker = speak;\n    return _this;\n  }\n\n  _createClass(SpeakerQueue, [{\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      this._queue = [];\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(speech) {\n      this._queue.push(speech);\n\n      this._speakNext();\n    }\n  }, {\n    key: \"_speakNext\",\n    value: function _speakNext() {\n      var _this2 = this;\n\n      if (this.isSpeaking) {\n        return;\n      }\n\n      var next = this._queue.shift();\n\n      if (next) {\n        this.isSpeaking = true;\n        this.speaker.getWorkerAudioData(next.text, next.options, function (audioContext, source) {\n          if (next.onStart) {\n            next.onStart(next);\n          }\n\n          next.scope.loadAudioData(audioContext, source, function () {\n            if (next.onStop) {\n              setTimeout(function () {\n                next.onStop(next);\n              }, 1);\n            }\n\n            _this2._onEnded();\n          });\n        });\n      } else {\n        this.emit('finish');\n      }\n    }\n  }, {\n    key: \"_onEnded\",\n    value: function _onEnded() {\n      this.isSpeaking = false;\n\n      this._speakNext();\n    }\n  }]);\n\n  return SpeakerQueue;\n}(EventEmitter);\n\nexport default SpeakerQueue;","import _classCallCheck from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport EventEmitter from 'events';\n\nvar MonauralScope =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(MonauralScope, _EventEmitter);\n\n  function MonauralScope(canvas, options) {\n    var _this;\n\n    _classCallCheck(this, MonauralScope);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MonauralScope).call(this));\n    if (!options) options = {};\n    _this.canvas = canvas;\n    _this.width = _this.canvas.width;\n    _this.height = _this.canvas.height;\n    _this.audioContext = null;\n    _this.meter = null;\n    _this.mediaStreamSource = null;\n    _this._draw = _this.draw.bind(_assertThisInitialized(_this));\n    _this.isRecording = false;\n\n    _this.setTheme({\n      lineWidth: options.lineWidth || 3,\n      strokeColor: options.strokeColor || '#FF0000',\n      clipColor: options.clipColor || options.strokeColor || '#FF0000',\n      fillColor: options.fillColor || 'rgba(255,0,0,0.1)',\n      bgOnColor: options.bgOnColor || null,\n      bgOffColor: options.bgOffColor || null,\n      dotColor: options.dotColor || '#FF0000',\n      dotSize: options.dotSize || 3,\n      background: options.background || null\n    });\n\n    return _this;\n  }\n\n  _createClass(MonauralScope, [{\n    key: \"setTheme\",\n    value: function setTheme(options) {\n      this.theme = options;\n      this.draw();\n    }\n  }, {\n    key: \"createAudioMeter\",\n    value: function createAudioMeter(audioContext, clipLevel, averaging, clipLag) {\n      // this.audioContext = audioContext;\n      var processor = audioContext.createScriptProcessor(512); //this.processor = processor;\n\n      processor.onaudioprocess = function (event) {\n        var buf = event.inputBuffer.getChannelData(0);\n        var bufLength = buf.length;\n        var sum = 0;\n        var x; // Do a root-mean-square on the samples: sum up the squares...\n\n        for (var i = 0; i < bufLength; i++) {\n          x = buf[i];\n\n          if (Math.abs(x) >= this.clipLevel) {\n            this.clipping = true;\n            this.lastClip = window.performance.now();\n          }\n\n          sum += x * x;\n        } // ... then take the square root of the sum.\n\n\n        var rms = Math.sqrt(sum / bufLength); // Now smooth this out with the averaging factor applied\n        // to the previous sample - take the max here because we\n        // want \"fast attack, slow release.\"\n\n        this.volume = Math.max(rms, this.volume * this.averaging); // console.log('onaudioprocess', this.volume);\n\n        if (!this.maxVolume) this.maxVolume = this.volume;\n        this.maxVolume = Math.max(this.volume, this.maxVolume);\n      };\n\n      processor.clipping = false;\n      processor.lastClip = 0;\n      processor.volume = 0;\n      processor.clipLevel = clipLevel || 0.99; //0.98;\n\n      processor.averaging = averaging || 0.97; //0.95;\n\n      processor.clipLag = clipLag || 500; //750;\n\n      processor.connect(audioContext.destination);\n\n      processor.checkClipping = function () {\n        if (!this.clipping) return false;\n        if (this.lastClip + this.clipLag < window.performance.now()) this.clipping = false;\n        return this.clipping;\n      };\n\n      processor.shutdown = function () {\n        this.disconnect();\n        this.onaudioprocess = null;\n      };\n\n      return processor;\n    }\n  }, {\n    key: \"setIsRecording\",\n    value: function setIsRecording(isRecording) {\n      if (this.isRecording === isRecording) {\n        console.log('same');\n        return;\n      }\n\n      this.isRecording = isRecording;\n      if (isRecording) this.startRecording();else this.stopRecording();\n    }\n  }, {\n    key: \"stopRecording\",\n    value: function stopRecording() {\n      if (this.isRecording) {\n        // if (this.audioContext) {\n        // \tif (this.meter) {\n        // \t\tthis.meter.disconnect(this.audioContext.destination);\n        // \t}\n        // } else {\n        // \tconsole.log('error: no audioContext');\n        // }\n        if (this.mediaStreamSource && this.meter) {\n          this.mediaStreamSource.disconnect(this.meter);\n        }\n\n        if (this.meter) {\n          this.meter.shutdown();\n        }\n\n        if (this.audioContext) {\n          this.audioContext.close();\n        }\n      }\n\n      this.isRecording = false;\n      this.isDrawing = false;\n    } // start and stop the mic to bring up the request dialog\n\n  }, {\n    key: \"requestMic\",\n    value: function requestMic() {\n      var _this2 = this;\n\n      this.startRecording(function () {\n        // sucess\n        _this2.stopRecording();\n      }, function () {\n        // error\n        _this2.stopRecording();\n      });\n    }\n  }, {\n    key: \"startRecording\",\n    value: function startRecording(successcb, errorcb) {\n      var _this3 = this;\n\n      if (this.isRecording) {\n        console.log('already recording');\n        return;\n      }\n\n      console.log('startRecording');\n      this.isRecording = true;\n\n      var _AudioContext = window.AudioContext || window.webkitAudioContext;\n\n      var audioContext = new _AudioContext();\n      this.audioContext = audioContext;\n\n      var success = function success(stream) {\n        console.log('startRecording success');\n\n        if (_this3.audioContext) {\n          try {\n            _this3.mediaStreamSource = audioContext.createMediaStreamSource(stream);\n            _this3.meter = _this3.createAudioMeter(audioContext);\n\n            _this3.mediaStreamSource.connect(_this3.meter);\n\n            _this3.startDrawing();\n\n            if (successcb) successcb();\n          } catch (e) {\n            if (errorcb) errorcb();\n          }\n        }\n      };\n\n      var fail = function fail(e) {\n        console.log('startRecording fail'); //debugger;\n\n        if (errorcb) errorcb();\n      };\n\n      try {\n        // let getUserMedia = get_user_media || navigator.webkitGetUserMedia;\n        // get_user_media = get_user_media || navigator.mozGetUserMedia;\n        // let getUserMedia = navigator.getUserMedia || (navigator.webkitGetUserMedia || navigator.mediaDevices.getUserMedia);\n        if (navigator.getUserMedia) {\n          navigator.getUserMedia({\n            \"audio\": {\n              \"mandatory\": {\n                \"googEchoCancellation\": \"false\",\n                \"googAutoGainControl\": \"false\",\n                \"googNoiseSuppression\": \"false\",\n                \"googHighpassFilter\": \"false\"\n              },\n              \"optional\": []\n            }\n          }, success, fail);\n        } else {\n          if (navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices.getUserMedia({\n              \"audio\": {\n                \"mandatory\": {\n                  \"googEchoCancellation\": \"false\",\n                  \"googAutoGainControl\": \"false\",\n                  \"googNoiseSuppression\": \"false\",\n                  \"googHighpassFilter\": \"false\"\n                },\n                \"optional\": []\n              }\n            }, success, fail);\n          } else {\n            throw new Error('no getUserMedia');\n            return;\n          }\n        }\n      } catch (e) {\n        alert('getUserMedia threw exception :' + e);\n      }\n    }\n  }, {\n    key: \"loadAudioData\",\n    value: function loadAudioData(audioContext, source, callback) {\n      var _this4 = this;\n\n      this.audioContext = audioContext;\n      this.source = source;\n      source.connect(audioContext.destination);\n      var meter = this.createAudioMeter(audioContext);\n      this.meter = meter;\n      source.connect(this.meter);\n\n      source.onended = function () {\n        _this4.isPlaying = false; // source.disconnect(audioContext.destination);\n\n        source.disconnect();\n        delete source.buffer; // this.meter.shutdown();\n\n        source.stop();\n\n        _this4.stopDrawing();\n\n        audioContext.close(); // source.disconnect();\n\n        if (callback) callback();\n      };\n\n      this.isPlaying = true;\n      this.startDrawing();\n      source.start(0);\n    }\n  }, {\n    key: \"startDrawing\",\n    value: function startDrawing() {\n      this.isDrawing = true;\n      this.draw();\n    }\n  }, {\n    key: \"stopDrawing\",\n    value: function stopDrawing() {\n      this.meter.volume = 0;\n      this.draw();\n      this.isDrawing = false;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      if (!this.canvas) {\n        console.log('no canvas');\n        return;\n      }\n\n      var ctx = this.canvas.getContext('2d');\n\n      if (this.theme.background) {\n        ctx.fillStyle = this.theme.background;\n        ctx.fillRect(0, 0, this.width, this.height);\n      } else {\n        ctx.clearRect(0, 0, this.width, this.height);\n      }\n\n      if (this.theme.bgOnColor || this.theme.bgOffColor) {\n        var maxsize = Math.min(this.width, this.height) / 2 - ctx.lineWidth;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, maxsize, 0, 2 * Math.PI, false);\n        ctx.fillStyle = this.isPlaying || this.isRecording ? this.theme.bgOnColor : this.theme.bgOffColor;\n        ctx.fill();\n        ctx.closePath();\n      }\n\n      ctx.lineWidth = this.theme.lineWidth;\n\n      if (this.theme.dotSize) {\n        var size = this.theme.dotSize;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, size, 0, 2 * Math.PI, false);\n        ctx.fillStyle = this.theme.dotColor;\n        ctx.fill();\n        ctx.closePath();\n      }\n\n      if (!this.isRecording && !this.isDrawing) {\n        console.log('not drawing');\n      } else {\n        // console.log('IS drawing ', this.meter.volume);\n        if (!this.meter) {\n          console.error('no meter'); // this.startDrawing();\n          // this.startRecording();\n\n          return;\n        }\n\n        ctx.strokeStyle = this.meter.checkClipping() ? this.theme.clipColor : this.theme.strokeColor;\n\n        var _maxsize = Math.min(this.width, this.height) / 2 - ctx.lineWidth;\n\n        var _size = this.meter.volume * _maxsize * 5;\n\n        if (_size > this.width / 2 - this.theme.lineWidth) _size = this.width / 2 - this.theme.lineWidth;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, _size, 0, 2 * Math.PI, false);\n\n        if (this.theme.fillColor) {\n          ctx.fillStyle = this.theme.fillColor;\n          ctx.fill();\n        }\n\n        ctx.stroke();\n        ctx.closePath();\n\n        if (this.isDrawing) {\n          window.requestAnimationFrame(this._draw);\n        }\n      }\n    }\n  }]);\n\n  return MonauralScope;\n}(EventEmitter);\n\nexport default MonauralScope;","import _classCallCheck from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dstein/dev/jaxcore/jaxcore-say/examples/borg-example/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport EventEmitter from 'events';\nimport async from 'async';\nimport SayQueue from './queue';\nimport profiles from './profiles';\nimport MonauralScope from './monauralscope';\n\nfunction getAudioContext() {\n  var audioContext;\n\n  if (window.AudioContext) {\n    audioContext = new window.AudioContext();\n  } else if (window.webkitAudioContext) {\n    console.log('creating webkitAudioContext');\n    audioContext = new window.webkitAudioContext();\n  } else {\n    throw new Error('no AudioContext');\n    return;\n  }\n\n  return audioContext;\n}\n\nvar variants = ['f1', 'f2', 'f3', 'f4', 'f5', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'croak', 'klatt', 'klatt2', 'klatt3', 'whisper', 'whisperf'];\nvar languageIds = {\n  'ca': 'Catalan',\n  'cs': 'Czech',\n  'de': 'German',\n  'el': 'Greek',\n  'en/en': 'English',\n  'en/en-n': 'English (N)',\n  'en/en-rp': 'English (RP)',\n  'en/en-sc': 'English (Scottish)',\n  'en/en-us': 'English (US)',\n  'en/en-wm': 'English (WM)',\n  'eo': 'Esperanto',\n  'es': 'Spanish',\n  'es-la': 'Spanish (Latin America)',\n  'fi': 'Finnish',\n  'fr': 'French',\n  'hu': 'Hungarian',\n  'it': 'Italian',\n  'kn': 'Kannada',\n  'la': 'Latin',\n  'lv': 'Latvian',\n  'nl': 'Dutch',\n  'pl': 'Polish',\n  'pt': 'Portuguese (Brazil)',\n  'pt-pt': 'Portuguese, European',\n  'ro': 'Romanian',\n  'sk': 'Slovak',\n  'sv': 'Swedish',\n  'tr': 'Turkish',\n  'zh': 'Chinese (Mandarin)',\n  'zh-yue': 'Chinese (Cantonese)'\n};\n\nvar Say =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(Say, _EventEmitter);\n\n  function Say(options) {\n    var _this;\n\n    _classCallCheck(this, Say);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Say).call(this));\n    if (!options) options = {};\n    _this.lang = null;\n    _this.profiles = {};\n    _this.defaultProfile = null;\n\n    for (var name in profiles) {\n      _this.addProfile(profiles[name]);\n    }\n\n    if (options.profile) {\n      _this.setProfile(options.profile);\n    } else {\n      _this.setProfile('Jack');\n    }\n\n    if (_this.profile.engine === 'espeak') {\n      if (options.language) {\n        _this.setLanguage(options.language);\n      }\n    }\n\n    if (!_this.lang) {\n      _this.setLanguage('en_us');\n    }\n\n    if (options.visualizer) {\n      _this.setVisualizer(options.visualizer);\n    }\n\n    return _this;\n  }\n\n  _createClass(Say, [{\n    key: \"setVisualizer\",\n    value: function setVisualizer(vis) {\n      this.visualizer = vis;\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(lang) {\n      this.lang = Say.getLanguageId(lang);\n    }\n  }, {\n    key: \"processOptions\",\n    value: function processOptions(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var profileName = options.profile ? options.profile : this.defaultProfile;\n      var profile = this.profiles[profileName]['default'];\n      var v = Object.assign({}, profile);\n      if (options.slow) v.speed = this.profiles[profileName]['slow'].speed;\n      if (options.fast) v.speed = this.profiles[profileName]['fast'].speed;\n      if (options.low) v.pitch = this.profiles[profileName]['low'].pitch;\n      if (options.high) v.pitch = this.profiles[profileName]['high'].pitch; // if (options.pitch) v.pitch = this.profiles[profileName]['pitch'].pitch;\n\n      if (options.pitch) v.pitch = options.pitch; // if (options.speed) v.speed = this.profiles[profileName]['speed'].speed;\n\n      if (options.speed) v.speed = options.speed;\n\n      if (options.language) {\n        v.voice = Say.getLanguageId(options.language);\n      } else {\n        v.voice = this.lang;\n      }\n\n      if (options.delay) {\n        v.delay = options.delay;\n      }\n\n      return v;\n    }\n  }, {\n    key: \"say\",\n    value: function say(text, options) {\n      var _this2 = this;\n\n      options = options || {};\n\n      if (this.visualizer) {\n        return new Promise(function (resolve) {\n          _this2.getWorkerAudioData(text, options, function (audioContext, source) {\n            _this2.visualizer.loadAudioData(audioContext, source, resolve);\n          });\n        });\n      } else {\n        return new Promise(function (resolve) {\n          _this2.getWorkerAudioData(text, options, function (audioContext, source) {\n            // this.visualizer.loadAudioData(audioContext, source, resolve);\n            if (options.profile === 'Borg') {\n              var audioBuffer = source.buffer; // attempt to mitigate audio click/pops at the end of the clip using a gain node\n\n              var gainNode = audioContext.createGain();\n              gainNode.gain.setValueAtTime(1, 0);\n              gainNode.gain.setValueAtTime(1, audioBuffer.duration - 0.5);\n              gainNode.gain.linearRampToValueAtTime(0.0001, audioBuffer.duration - 0.2);\n              source.connect(gainNode);\n              gainNode.connect(audioContext.destination);\n              var didexit = false;\n              setTimeout(function () {\n                if (!didexit) {\n                  didexit = true; // stopping early seems to help with click/pops as well\n\n                  source.stop();\n                  audioContext.close();\n                  resolve();\n                }\n              }, audioBuffer.duration * 1000 - 200); // stop 0.1s early\n\n              source.onended = function () {\n                if (!didexit) {\n                  didexit = true;\n                  audioContext.close();\n                  resolve();\n                }\n              };\n\n              source.start(0);\n            } else {\n              source.connect(audioContext.destination);\n\n              source.onended = function () {\n                // source.disconnect(audioContext.destination);\n                audioContext.close();\n                resolve();\n              };\n\n              source.start(0);\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"getWorkerAudioData\",\n    value: function getWorkerAudioData(text, options, callback) {\n      text = text.toLowerCase();\n      if (!options) options = {};\n      var profileName = options.profile || this.defaultProfile;\n\n      if (profileName === 'Borg') {\n        this.borgGetAudioData(text, callback);\n      } else {\n        if (!profileName) profileName = 'Jack';\n        var profile = this.profiles[profileName];\n\n        if (!profile) {\n          throw new Error('no profile: ' + profileName);\n        }\n\n        var engine = profile.engine;\n        var workerPath;\n\n        if (engine === 'sam') {\n          workerPath = Say.workers.sam;\n        } else if (engine === 'espeak') {\n          if (typeof Say.workers.espeak === 'string') {\n            workerPath = Say.workers.espeak;\n          } else if (Say.workers.espeak.length) {\n            var lang = options.language;\n\n            if (lang.startsWith('en-')) {\n              lang = 'en/' + l;\n            }\n\n            for (var i = 0; i < Say.workers.espeak.length; i++) {\n              if (Say.workers.espeak[i].language === lang) {\n                workerPath = Say.workers.espeak[i].path;\n                break;\n              }\n            }\n          }\n        }\n\n        if (!workerPath) throw new Error('no worker path for this language');\n        var worker = new Worker(workerPath);\n        worker.addEventListener('message', function (e) {\n          console.log('received from worker:', e.data);\n\n          if (e.data.rawdata) {\n            var audioContext;\n\n            if (window.AudioContext) {\n              audioContext = new window.AudioContext();\n            } else if (window.webkitAudioContext) {\n              console.log('creating webkitAudioContext');\n              audioContext = new window.webkitAudioContext();\n            } else {\n              throw new Error('no AudioContext');\n              return;\n            } // if (!audioContext) {\n            // \tconsole.log('no audioContext');\n            // \taudioContext = new window.webkitAudioContext();\n            // }\n\n\n            if (!audioContext) {\n              console.log('no audioContext 2');\n              debugger;\n              return;\n            }\n\n            if (!audioContext.createBufferSource) {\n              console.log('no createBufferSource');\n              debugger;\n              return;\n            }\n\n            var source = audioContext.createBufferSource();\n            var data = e.data.rawdata;\n\n            if (options.rawAudioData) {\n              callback(data);\n            } else {\n              if (engine === 'sam') {\n                var audioBuffer = audioContext.createBuffer(1, data.length, 22050);\n                var buffer = audioBuffer.getChannelData(0);\n\n                for (var _i = 0; _i < data.length; _i++) {\n                  buffer[_i] = data[_i];\n                }\n\n                source.buffer = audioBuffer;\n                console.log('returning sam');\n                callback(audioContext, source);\n              } else {\n                audioContext.decodeAudioData(data, function (buffer) {\n                  source.buffer = buffer; // console.log('returning espeak');\n\n                  callback(audioContext, source);\n                }, function (e) {\n                  console.log('error', e);\n                });\n              }\n            }\n          }\n        }, false);\n        var voptions = this.processOptions(options);\n        worker.postMessage({\n          cmd: 'speak',\n          text: text,\n          options: voptions\n        });\n      }\n    }\n  }, {\n    key: \"replacementsFor\",\n    value: function replacementsFor(text, replacements) {\n      replacements.forEach(function (replacement) {\n        var from = replacement[0];\n        var to = replacement[1];\n        text = text.replace(new RegExp(from, 'gi'), to);\n      });\n      return text;\n    } // todo:\n    // multipartData() {\n    // \tvar parts = [\n    // \t\t{ text: \"Travel to\",      voice: \"en/en-us\", variant: \"m3\" },\n    // \t\t{ text: \"Paris\",          voice: \"fr\",       variant: \"f5\" },\n    // \t\t{ text: \"at light speed\", voice: \"en/en-us\", variant: \"m3\" }\n    // \t];\n    // }\n\n  }, {\n    key: \"addProfile\",\n    value: function addProfile(profile) {\n      var profileTypes = ['high', 'low', 'fast', 'slow'];\n      profileTypes.forEach(function (type) {\n        if (type !== 'default' && type !== 'name') {\n          var p = Object.assign({}, profile['default']);\n\n          for (var i in profile[type]) {\n            p[i] = profile[type][i];\n          }\n\n          profile[type] = p;\n        }\n      });\n      this.profiles[profile.name] = profile;\n    }\n  }, {\n    key: \"setProfile\",\n    value: function setProfile(name) {\n      this.defaultProfile = name;\n      this.profile = profiles[name];\n      return this;\n    }\n  }, {\n    key: \"borgGetAudioData\",\n    value: function borgGetAudioData(text, callback) {\n      var _this3 = this;\n\n      text += '....'; // add some silence to the end\n\n      var voices = []; // let options;\n\n      var audioContext = getAudioContext();\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Jack',\n          speed: 160,\n          pitch: 1,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Jack',\n          speed: 160,\n          pitch: 50,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Zhora',\n          speed: 160,\n          pitch: 40,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Roy',\n          speed: 160,\n          pitch: 40,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Leon',\n          speed: 160,\n          pitch: 25,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Xenu',\n          speed: 164,\n          pitch: 10,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      async.parallel(voices, function (err, results) {\n        if (results) {\n          // debugger;\n          var maxLength = 0;\n          var maxDuration = 0;\n          var sampleRate = 0;\n          results.forEach(function (result) {\n            var data = result[0];\n            var buffer = result[1]; // var audioBuffer = data.createBuffer(2); //, maxLength, 48000);\n\n            maxLength = Math.max(maxLength, buffer.length);\n            maxDuration = Math.max(maxDuration, buffer.duration);\n            sampleRate = buffer.sampleRate;\n          });\n\n          var _audioContext = getAudioContext(); // let audioBuffer = audioContext.createBuffer(2, maxLength, 48000);\n\n\n          var audioBuffer = _audioContext.createBuffer(2, sampleRate * maxDuration, sampleRate); // var leftBuffer = audioBuffer.getChannelData(0);\n          // var rightBuffer = audioBuffer.getChannelData(1);\n\n\n          var channgelToggle = false;\n          results.forEach(function (result) {\n            var data = result[0];\n            var buffer = result[1]; // debugger;\n\n            if (channgelToggle) {\n              var leftInBuffer = buffer.getChannelData(0);\n              var leftOutBuffer = audioBuffer.getChannelData(0); // let count = 0;\n\n              for (var i = 0; i < maxLength; i++) {\n                if (i > leftOutBuffer.length) leftOutBuffer[i] = 0;\n                leftOutBuffer[i] += leftInBuffer[i]; // count++;\n              }\n            } else {\n              var rightInBuffer = buffer.getChannelData(0);\n              var rightOutBuffer = audioBuffer.getChannelData(1); // let count = 0;\n\n              for (var _i2 = 0; _i2 < maxLength; _i2++) {\n                if (_i2 > rightInBuffer.length) rightOutBuffer[_i2] = 0;else rightOutBuffer[_i2] += rightInBuffer[_i2]; // count++;\n              }\n            } // console.log('count', count);\n\n\n            channgelToggle = !channgelToggle; // debugger;\n            // let audioContext = result[0];\n            // let source = result[1];\n            //\n            // console.log('source', source);\n            // debugger;\n            // source.connect(audioContext.destination);\n            // source.onended = function () {\n            // \tsource.connect(audioContext.destination);\n            // \taudioContext.close();\n            // };\n            // source.start(0);\n          }); // let audioContext2 = getAudioContext();\n\n          var source = _audioContext.createBufferSource();\n\n          source.buffer = audioBuffer;\n          callback(_audioContext, source);\n        }\n      });\n    }\n  }]);\n\n  return Say;\n}(EventEmitter);\n\nSay.variants = variants;\nSay.profiles = profiles;\nSay.languageIds = languageIds;\n\nSay.getLanguageId = function (lang) {\n  if (lang.indexOf('_') > -1) lang = lang.replace('_', '-'); // if (lang === 'en-us') lang = 'en/en-us';\n  // if (lang === 'en') lang = 'en/en';\n\n  if (lang.startsWith('en') && lang.indexOf('/') === -1) lang = 'en/' + lang;\n  return lang;\n};\n\nSay.addProfile = function (profile) {\n  for (var name in profile) {\n    Say.profiles[name] = profile[name];\n  }\n};\n\nSay.setWorkers = function (workers) {\n  Say.workers = workers;\n};\n\nvar sayQueue = new SayQueue(new Say());\nSay.queue = sayQueue.queue.bind(sayQueue);\nSay.clearQueue = sayQueue.clearQueue.bind(sayQueue);\nSay.on = sayQueue.on.bind(sayQueue);\nSay.once = sayQueue.once.bind(sayQueue);\nexport default Say;\nexport { MonauralScope };","module.exports = {\n  \"Jack\": {\n    \"name\": \"Jack\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 10,\n      speed: 180,\n      variant: 'm2'\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 0\n    },\n    \"slow\": {\n      speed: 120\n    },\n    \"fast\": {\n      speed: 250\n    }\n  },\n  \"Pris\": {\n    \"name\": \"Pris\",\n    \"phoneticName\": \"Priss\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 47,\n      speed: 130,\n      variant: 'f5'\n    },\n    \"high\": {\n      pitch: 80\n    },\n    \"low\": {\n      pitch: 20\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Roy\": {\n    \"name\": \"Roy\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 35,\n      speed: 180,\n      variant: 'm1'\n    },\n    \"high\": {\n      pitch: 3\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Scotty\": {\n    \"name\": \"Scotty\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 35,\n      speed: 200,\n      variant: 'm3'\n    },\n    \"high\": {\n      pitch: 3\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 230\n    }\n  },\n  \"Xenu\": {\n    \"name\": \"Xenu\",\n    \"phoneticName\": \"zee-new\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 1,\n      pitch: 35,\n      speed: 170,\n      variant: 'klatt3'\n    },\n    \"high\": {\n      pitch: 65\n    },\n    \"low\": {\n      pitch: 0\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Cylon\": {\n    \"name\": \"Cylon\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 1,\n      pitch: 35,\n      speed: 170,\n      variant: 'whisperf'\n    },\n    \"high\": {\n      pitch: 65,\n      speed: 150\n    },\n    \"low\": {\n      pitch: 0,\n      speed: 140\n    },\n    \"slow\": {\n      pitch: 20,\n      speed: 100,\n      wordgap: 1\n    },\n    \"fast\": {\n      speed: 200,\n      wordgap: 0\n    }\n  },\n  \"Leon\": {\n    \"name\": \"Leon\",\n    \"phoneticName\": \"Leeon\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 40,\n      speed: 150,\n      variant: 'm7'\n    },\n    \"high\": {\n      pitch: 55\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Rachel\": {\n    \"name\": \"Rachel\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 60,\n      speed: 150,\n      variant: 'f2'\n    },\n    \"high\": {\n      pitch: 75\n    },\n    \"low\": {\n      pitch: 40\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Zhora\": {\n    \"name\": \"Zhora\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 60,\n      speed: 150,\n      variant: 'f4'\n    },\n    \"high\": {\n      pitch: 75\n    },\n    \"low\": {\n      pitch: 40\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Borg\": {\n    \"name\": \"Borg\",\n    \"engine\": \"espeak\",\n    \"default\": {}\n  },\n  \"Sam\": {\n    \"name\": \"Sam\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 64,\n      pitch: 64,\n      throat: 128,\n      mouth: 128\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 110\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 40\n    }\n  },\n  \"Elf\": {\n    \"name\": \"Elf\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 72,\n      pitch: 64,\n      throat: 110,\n      mouth: 160\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 110\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 40\n    }\n  },\n  \"Robo\": {\n    \"name\": \"Robo\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 82,\n      pitch: 60,\n      throat: 190,\n      mouth: 190\n    },\n    \"high\": {\n      pitch: 40\n    },\n    \"low\": {\n      pitch: 100\n    },\n    \"slow\": {\n      speed: 120\n    },\n    \"fast\": {\n      speed: 50\n    }\n  },\n  \"Granny\": {\n    \"name\": \"Granny\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 82,\n      pitch: 35,\n      throat: 145,\n      mouth: 145\n    },\n    \"high\": {\n      pitch: 25\n    },\n    \"low\": {\n      pitch: 120\n    },\n    \"slow\": {\n      speed: 130\n    },\n    \"fast\": {\n      speed: 40\n    }\n  }\n};"],"sourceRoot":""}