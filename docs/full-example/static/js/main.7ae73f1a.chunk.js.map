{"version":3,"sources":["../../../index.js","SayApp.js","../../../lib/say.js","../../../lib/queue.js","../../../lib/profiles.js","../../../lib/monauralscope.js","serviceWorker.js","index.js"],"names":["module","exports","global","Say","addProfile","amplitude","wordgap","pitch","speed","variant","throat","mouth","setWorkers","sayVoice","language","SayApp","canvasRef","React","createRef","state","profile","text","languageEnabled","spoken","spokenIndex","code","viewCode","app","this","updateCode","monoScope","MonauralScope","current","setVisualizer","ref","width","height","renderProfileSelect","renderSpeedSelect","renderPitchSelect","renderLanguageSelect","size","placeholder","onKeyUp","e","onChange","onChangeText","value","onClick","sayText","map","s","i","key","href","clickSpoken","clear","setState","renderCode","preventDefault","o","sayIndex","profiles","engine","keyCode","console","log","lang","languageIds","push","selectLanguage","target","options","selectedIndex","callback","generateCode","selectSpeed","selectPitch","espeak","p","sam","selectProfile","label","keepText","length","saying","previousSaying","isSame","index","replacements","phoneticName","colors","Jack","Pris","Roy","Xenu","Cylon","Borg","Leon","Rachel","Zhora","Sam","Elf","Robo","Granny","color","theme","strokeColor","clipColor","fillColor","dotColor","isSpeaking","say","then","voice_id","getLanguageId","custom","intonations","join","Component","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","EventEmitter","async","SayQueue","getAudioContext","audioContext","window","AudioContext","webkitAudioContext","Error","_EventEmitter","_this","name","call","defaultProfile","setProfile","setLanguage","visualizer","vis","profileName","v","Object","assign","slow","fast","low","high","voice","delay","_this2","Promise","resolve","getWorkerAudioData","source","loadAudioData","audioBuffer","buffer","gainNode","createGain","gain","setValueAtTime","duration","linearRampToValueAtTime","connect","destination","didexit","setTimeout","stop","close","onended","start","toLowerCase","borgGetAudioData","workerPath","workers","startsWith","l","path","worker","Worker","addEventListener","data","rawdata","createBufferSource","rawAudioData","createBuffer","getChannelData","_i","decodeAudioData","voptions","processOptions","postMessage","cmd","forEach","replacement","from","to","replace","RegExp","type","_this3","voices","parallel","err","results","maxLength","maxDuration","sampleRate","result","Math","max","_audioContext","channgelToggle","leftInBuffer","leftOutBuffer","rightInBuffer","rightOutBuffer","_i2","variants","indexOf","sayQueue","queue","bind","clearQueue","on","once","SpeakerQueue","speak","_queue","speaker","speech","_speakNext","next","shift","onStart","scope","onStop","_onEnded","emit","_assertThisInitialized","canvas","meter","mediaStreamSource","_draw","draw","isRecording","setTheme","lineWidth","bgOnColor","bgOffColor","dotSize","background","clipLevel","averaging","clipLag","processor","createScriptProcessor","onaudioprocess","event","x","buf","inputBuffer","bufLength","sum","abs","clipping","lastClip","performance","now","rms","sqrt","volume","maxVolume","checkClipping","shutdown","disconnect","startRecording","stopRecording","isDrawing","successcb","errorcb","success","stream","createMediaStreamSource","createAudioMeter","startDrawing","fail","navigator","getUserMedia","mediaDevices","alert","_this4","isPlaying","stopDrawing","ctx","getContext","fillStyle","fillRect","clearRect","maxsize","min","beginPath","arc","PI","fill","closePath","error","strokeStyle","_maxsize","_size","stroke","requestAnimationFrame","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7ae73f1a.chunk.js","sourcesContent":["module.exports = require('./lib/say');","import React, {Component} from 'react';\nimport Say from 'jaxcore-say';\nimport {MonauralScope} from 'jaxcore-say';\n\nglobal.Say = Say;\n\n// Add a custom ESpeak voice\nSay.addProfile({\n\t\"Custom ESpeak Voice\": {\n\t\t\"name\": \"Custom ESpeak Voice\",\n\t\t\"engine\": \"espeak\",\n\t\t\"default\": {\n\t\t\tamplitude: 100,\n\t\t\twordgap: 1,\n\t\t\tpitch: 40,\n\t\t\tspeed: 150,\n\t\t\tvariant: 'm7'\n\t\t},\n\t\t\"high\": {\n\t\t\tpitch: 55\n\t\t},\n\t\t\"low\": {\n\t\t\tpitch: 5\n\t\t},\n\t\t\"slow\": {\n\t\t\tspeed: 100\n\t\t},\n\t\t\"fast\": {\n\t\t\tspeed: 200\n\t\t}\n\t}\n});\n\n// Add a custom SAM voice\n// Note: in SAM the pitch and speed is inverted relative to ESpeak (eg. use higher pitch number for a deep voice)\nSay.addProfile({\n\t\"Custom SAM Voice\": {\n\t\t\"name\": \"Custom SAM Voice\",\n\t\t\"engine\": \"sam\",\n\t\t\"default\": {\n\t\t\tspeed: 82,\n\t\t\tpitch: 72,\n\t\t\tthroat: 110,\n\t\t\tmouth: 105\n\t\t},\n\t\t\"high\": {\n\t\t\tpitch: 50\n\t\t},\n\t\t\"low\": {\n\t\t\tpitch: 100\n\t\t},\n\t\t\"slow\": {\n\t\t\tspeed: 130\n\t\t},\n\t\t\"fast\": {\n\t\t\tspeed: 60\n\t\t}\n\t}\n});\n\nSay.setWorkers({\n\t'espeak': 'webworkers/espeak-all-worker.js',\n\t'sam': 'webworkers/sam-worker.js'\n});\n\n// if you only need English, French, or Spanish use the language specific worker build\n// Say.setWorkers({\n// \t'espeak': '/webworkers/espeak-en-worker.js',\n// });\n// Say.setWorkers({\n// \t'espeak': '/webworkers/espeak-es-worker.js',\n// });\n// Say.setWorkers({\n// \t'espeak': '/webworkers/espeak-fr-worker.js',\n// });\n\nvar sayVoice = new Say({\n\tlanguage: 'en'\n});\nglobal.sayVoice = sayVoice;\n\nclass SayApp extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\t\n\t\tthis.canvasRef = React.createRef();\n\t\t\n\t\tthis.state = {\n\t\t\tprofile: 'Jack',\n\t\t\tspeed: 'default',\n\t\t\tpitch: 'default',\n\t\t\ttext: '',\n\t\t\tlanguage: 'en/en',\n\t\t\tlanguageEnabled: true,\n\t\t\tspoken: [\n\t\t\t\t{\n\t\t\t\t\tprofile: 'Jack',\n\t\t\t\t\tspeed: 'default',\n\t\t\t\t\tpitch: 'default',\n\t\t\t\t\ttext: 'Hello World',\n\t\t\t\t\tlanguage: 'en/en'\n\t\t\t\t}\n\t\t\t],\n\t\t\tspokenIndex: null,\n\t\t\tcode: '',\n\t\t\tviewCode: false\n\t\t};\n\t\t\n\t\tglobal.app = this;\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.updateCode();\n\t\tthis.monoScope = new MonauralScope(this.canvasRef.current);\n\t\tsayVoice.setVisualizer(this.monoScope);\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h2>Jaxcore Say: Full Example</h2>\n\t\t\t\t<div>\n\t\t\t\t\t<canvas ref={this.canvasRef} width=\"300\" height=\"300\"/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\tVoice: {this.renderProfileSelect()}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\tSpeed: {this.renderSpeedSelect()}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\tPitch: {this.renderPitchSelect()}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\tLanguage: {this.renderLanguageSelect()}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<input size=\"40\" placeholder=\"Type something then press Enter\" onKeyUp={e => this.onKeyUp(e)}\n\t\t\t\t\t\t   onChange={e => this.onChangeText(e)} value={this.state.text}/>\n\t\t\t\t\t<button onClick={e => this.sayText(true)}>Say</button>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<ul>\n\t\t\t\t\t{this.state.spoken.map((s, i) => {\n\t\t\t\t\t\treturn (<li key={i}><a href=\"/\" onClick={e => this.clickSpoken(e, i)}>{s.text}</a> ({s.profile} {s.speed} {s.pitch})</li>);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={e => this.clear()}>Clear</button>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={e => this.setState({viewCode:!this.state.viewCode})}>\n\t\t\t\t\t\t{this.state.viewCode? 'Hide Code':'View Code'}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t{this.renderCode()}\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\trenderCode() {\n\t\tif (this.state.viewCode) {\n\t\t\treturn (<pre>{this.state.code}</pre>);\n\t\t}\n\t}\n\t\n\tclear(e) {\n\t\tthis.setState({\n\t\t\tspoken: []\n\t\t})\n\t}\n\t\n\tclickSpoken(e, i) {\n\t\te.preventDefault();\n\t\tconst o = this.state.spoken[i];\n\t\tthis.sayIndex(i);\n\t\tconst languageEnabled = Say.profiles[o.profile].engine === 'espeak';\n\t\tthis.setState({\n\t\t\ttext: o.text,\n\t\t\tprofile: o.profile,\n\t\t\tspeed: o.speed,\n\t\t\tpitch: o.pitch,\n\t\t\tlanguage: o.language,\n\t\t\tlanguageEnabled\n\t\t}, () => {\n\t\t\tthis.updateCode(i);\n\t\t});\n\t}\n\t\n\tonKeyUp(e) {\n\t\tif (e.keyCode === 13) { // Enter\n\t\t\te.preventDefault();\n\t\t\tthis.sayText();\n\t\t\treturn;\n\t\t}\n\t\tthis.updateCode();\n\t\tconsole.log('keydown', e);\n\t}\n\t\n\trenderLanguageSelect() {\n\t\tif (this.state.languageEnabled) {\n\t\t\tconst o = [];\n\t\t\tfor (let lang in Say.languageIds) {\n\t\t\t\to.push(<option key={lang} value={lang}>{Say.languageIds[lang]}</option>);\n\t\t\t}\n\t\t\treturn (<select onChange={e => this.selectLanguage(e)} value={this.state.language}>\n\t\t\t\t{o}\n\t\t\t</select>);\n\t\t}\n\t\telse {\n\t\t\treturn \"none\";\n\t\t}\n\t}\n\t\n\tselectLanguage(e) {\n\t\tlet language = e.target.options[e.target.selectedIndex].value;\n\t\tthis.setState({\n\t\t\tlanguage\n\t\t}, () => {\n\t\t\tthis.updateCode();\n\t\t});\n\t}\n\t\n\tupdateCode(i, callback) {\n\t\tif (typeof i === 'undefined') i = null;\n\t\tconst code = this.generateCode(i);\n\t\tthis.setState({\n\t\t\tcode\n\t\t}, callback);\n\t}\n\t\n\trenderSpeedSelect() {\n\t\treturn (<select onChange={e => this.selectSpeed(e)} value={this.state.speed}>\n\t\t\t<option value=\"default\">default</option>\n\t\t\t<option value=\"fast\">fast</option>\n\t\t\t<option value=\"slow\">slow</option>\n\t\t</select>);\n\t}\n\trenderPitchSelect() {\n\t\treturn (<select onChange={e => this.selectPitch(e)} value={this.state.pitch}>\n\t\t\t<option value=\"default\">default</option>\n\t\t\t<option value=\"low\">low</option>\n\t\t\t<option value=\"high\">high</option>\n\t\t</select>);\n\t}\n\t\n\tselectPitch(e) {\n\t\tlet pitch = e.target.options[e.target.selectedIndex].value;\n\t\tthis.setState({\n\t\t\tpitch\n\t\t}, () => {\n\t\t\tthis.updateCode();\n\t\t});\n\t}\n\tselectSpeed(e) {\n\t\tlet speed = e.target.options[e.target.selectedIndex].value;\n\t\tthis.setState({\n\t\t\tspeed\n\t\t}, () => {\n\t\t\tthis.updateCode();\n\t\t});\n\t}\n\t\n\trenderProfileSelect() {\n\t\tlet espeak = [];\n\t\tfor (let p in sayVoice.profiles) {\n\t\t\tif (Say.profiles[p].engine === 'espeak') {\n\t\t\t\tespeak.push((<option key={p} value={p}>{p}</option>));\n\t\t\t}\n\t\t}\n\t\t\n\t\t// espeak.push((<option key={'Borg'} value={'Borg'}>Borg</option>));\n\t\t\n\t\tlet sam = [];\n\t\tfor (let p in sayVoice.profiles) {\n\t\t\tif (Say.profiles[p].engine === 'sam') {\n\t\t\t\tsam.push((<option key={p} value={p}>{p}</option>));\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (<select onChange={e => this.selectProfile(e)} value={this.state.profile}>\n\t\t\t<optgroup label=\"- ESpeak Voices -\">\n\t\t\t\t{espeak}\n\t\t\t</optgroup>\n\t\t\t<optgroup label=\"- SAM Voices -\">\n\t\t\t\t{sam}\n\t\t\t</optgroup>\n\t\t</select>);\n\t}\n\t\n\tselectProfile(e) {\n\t\tconst profile = e.target.options[e.target.selectedIndex].value;\n\t\tconst languageEnabled = Say.profiles[profile].engine === 'espeak';\n\t\tthis.setState({\n\t\t\tprofile,\n\t\t\tlanguageEnabled\n\t\t}, () => {\n\t\t\tthis.updateCode();\n\t\t});\n\t}\n\t\n\tsayText(keepText) {\n\t\tlet text = this.state.text;\n\t\tif (text.length === 0) return;\n\t\t\n\t\tconst profile = this.state.profile;\n\t\tconst speed = this.state.speed;\n\t\tconst pitch = this.state.pitch;\n\t\tconst language = this.state.language;\n\t\t\n\t\t\n\t\tconst saying = {\n\t\t\ttext,\n\t\t\tspeed,\n\t\t\tpitch,\n\t\t\tlanguage,\n\t\t\tprofile\n\t\t};\n\t\t\n\t\tconst previousSaying = this.state.spoken[this.state.spoken.length-1];\n\t\tlet isSame = false;\n\t\tif (previousSaying && previousSaying.text === text &&\n\t\t\tpreviousSaying.speed === speed &&\n\t\t\tpreviousSaying.pitch === pitch &&\n\t\t\tpreviousSaying.language === language &&\n\t\t\tpreviousSaying.profile === profile) {\n\t\t\tisSame = true;\n\t\t}\n\t\t\n\t\tconst spoken = this.state.spoken;\n\t\tlet spokenIndex;\n\t\tif (!isSame) {\n\t\t\tspokenIndex = this.state.spoken.length;\n\t\t\tspoken.push(saying);\n\t\t}\n\t\telse spokenIndex = this.state.spoken.length - 1;\n\t\t\n\t\tif (!keepText) text = '';\n\t\t\n\t\tthis.setState({\n\t\t\tspoken,\n\t\t\tspokenIndex,\n\t\t\ttext\n\t\t}, () => {\n\t\t\tthis.updateCode();\n\t\t\tthis.sayIndex(spokenIndex);\n\t\t});\n\t\t\n\t}\n\t\n\tsayIndex(index) {\n\t\tconst saying = this.state.spoken[index];\n\t\t\n\t\tlet replacements = [];\n\t\t\n\t\t// this is so the names are pronounced properly (eg. Priss instead of Pris)\n\t\tif (Say.profiles[saying.profile].phoneticName) {\n\t\t\treplacements.push([saying.profile, Say.profiles[saying.profile].phoneticName]);\n\t\t}\n\t\t\n\t\tconst options = {\n\t\t\tprofile: saying.profile,\n\t\t\tlanguage: saying.language,\n\t\t\treplacements,\n\t\t};\n\t\tif (saying.speed !== 'default') options[saying.speed] = true;\n\t\tif (saying.pitch !== 'default') options[saying.pitch] = true;\n\t\t\n\t\tthis.colors = {\n\t\t\tJack: '255,0,0',\n\t\t\tPris: '255,255,0',\n\t\t\tRoy: '0,255,0',\n\t\t\tXenu: '255,0,255',\n\t\t\tCylon: '150,75,0',\n\t\t\tBorg: '128,128,128',\n\t\t\tLeon: '128,0,0',\n\t\t\tRachel: '128,128,0',\n\t\t\tZhora: '0,128,0',\n\t\t\tSam: '0,128,128',\n\t\t\tElf: '128,0,128',\n\t\t\tRobo: '255,0,128',\n\t\t\tGranny: '255,128,0'\n\t\t};\n\t\tlet color = this.colors[saying.profile] || '0,0,255';\n\t\t\n\t\tthis.monoScope.theme.strokeColor = 'rgb('+color+')';\n\t\tthis.monoScope.theme.clipColor = 'black';\n\t\tthis.monoScope.theme.fillColor = 'rgba('+color+',0.2)';\n\t\tthis.monoScope.theme.dotColor = 'rgb('+color+')';\n\t\t\n\t\tconsole.log('Say: started');\n\t\t\n\t\tthis.setState({\n\t\t\tisSpeaking: true\n\t\t}, () => {\n\t\t\tsayVoice.say(saying.text, options).then(() => {\n\t\t\t\tconsole.log('Say: stopped');\n\t\t\t\tthis.setState({\n\t\t\t\t\tisSpeaking: false\n\t\t\t\t});\n\t\t\t})\n\t\t});\n\t}\n\t\n\tonChangeText(e) {\n\t\tthis.setState({\n\t\t\ttext: e.target.value\n\t\t}, () => {\n\t\t\tthis.updateCode();\n\t\t});\n\t}\n\t\n\tgenerateCode(i) {\n\t\tlet saying;\n\t\tif (i === null || this.state.spoken.length===0) saying = this.state;\n\t\telse saying = this.state.spoken[i];\n\t\t\n\t\tconst voice_id = Say.getLanguageId(saying.language);\n\t\t\n\t\tlet custom = '';\n\t\tif (saying.profile === 'Custom ESpeak Voice') {\n\t\t\tcustom = \"Say.addProfile({\\n\" +\n\t\t\t\t\"\\t\\\"Custom ESpeak Voice\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\\"name\\\": \\\"Custom ESpeak Voice\\\",\\n\" +\n\t\t\t\t\"\\t\\t\\\"engine\\\": \\\"espeak\\\",\\n\" +\n\t\t\t\t\"\\t\\t\\\"default\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tamplitude: 100,\\n\" +\n\t\t\t\t\"\\t\\t\\twordgap: 1,\\n\" +\n\t\t\t\t\"\\t\\t\\tpitch: 40,\\n\" +\n\t\t\t\t\"\\t\\t\\tspeed: 150,\\n\" +\n\t\t\t\t\"\\t\\t\\tvariant: 'm7'\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"high\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tpitch: 55\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"low\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tpitch: 5\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"slow\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tspeed: 100\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"fast\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tspeed: 200\\n\" +\n\t\t\t\t\"\\t\\t}\\n\" +\n\t\t\t\t\"\\t}\\n\" +\n\t\t\t\t\"});\\n\";\n\t\t}\n\t\telse if (saying.profile === 'Custom SAM Voice') {\n\t\t\tcustom = \"Say.addProfile({\\n\" +\n\t\t\t\t\"\\t\\\"Custom SAM Voice\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\\"name\\\": \\\"Custom SAM Voice\\\",\\n\" +\n\t\t\t\t\"\\t\\t\\\"engine\\\": \\\"sam\\\",\\n\" +\n\t\t\t\t\"\\t\\t\\\"default\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tspeed: 82,\\n\" +\n\t\t\t\t\"\\t\\t\\tpitch: 72,\\n\" +\n\t\t\t\t\"\\t\\t\\tthroat: 110,\\n\" +\n\t\t\t\t\"\\t\\t\\tmouth: 105\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"high\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tpitch: 50\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"low\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tpitch: 100\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"slow\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tspeed: 130\\n\" +\n\t\t\t\t\"\\t\\t},\\n\" +\n\t\t\t\t\"\\t\\t\\\"fast\\\": {\\n\" +\n\t\t\t\t\"\\t\\t\\tspeed: 60\\n\" +\n\t\t\t\t\"\\t\\t}\\n\" +\n\t\t\t\t\"\\t}\\n\" +\n\t\t\t\t\"});\\n\";\n\t\t}\n\t\t\n\t\tlet lang = '';\n\t\tlet langimport = '';\n\t\tif (Say.profiles[saying.profile].engine === 'espeak') {\n\t\t\tlang = \"\\tlanguage: \\\"\" + saying.language + \"\\\"\\n\";\n\t\t}\n\t\t\n\t\tif (voice_id === 'en/en') {\n\t\t\tlangimport = 'Say.setWorkers({\\n' +\n\t\t\t\t'\\t\\'espeak\\': \\'webworkers/espeak-en-worker.js\\',\\n' +\n\t\t\t\t'\\t\\'sam\\': \\'webworkers/sam-worker.js\\'\\n' +\n\t\t\t\t'});\\n';\n\t\t}\n\t\telse {\n\t\t\tlangimport = 'Say.setWorkers({\\n' +\n\t\t\t\t'\\t\\'espeak\\': \\'webworkers/espeak-all-worker.js\\',\\n' +\n\t\t\t\t'\\t\\'sam\\': \\'webworkers/sam-worker.js\\'\\n' +\n\t\t\t\t'});\\n';\n\t\t}\n\t\tlet s = \"import Speak from \\\"jaxcore-speak\\\";\\n\" +\n\t\t\tlangimport+\n\t\t\tcustom+\n\t\t\t\"var voice = new Say({\\n\" +\n\t\t\t\"\\tprofile: \\\"\"+saying.profile+\"\\\",\\n\" +\n\t\t\tlang+\n\t\t\t\"});\\n\";\n\t\t\n\t\tif (saying.speed === 'default' && saying.pitch === 'default') {\n\t\t\ts += \"voice.say(\\\"\"+saying.text+\"\\\");\";\n\t\t}\n\t\telse {\n\t\t\tlet intonations = [];\n\t\t\tif (saying.speed !== 'default') intonations.push(\"  \" + saying.speed+\": true\");\n\t\t\tif (saying.pitch !== 'default') intonations.push(\"  \" + saying.pitch+\": true\");\n\t\t\ts += \"voice.say(\\\"\"+saying.text+\"\\\", {\\n\" +\n\t\t\t\tintonations.join(\",\\n\")+\"\\n\"+\n\t\t\t\t\"});\";\n\t\t}\n\t\t\n\t\treturn s;\n\t}\n}\n\nexport default SayApp;\n","var _classCallCheck = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/inherits\");\n\n// TODO: add window.speechSynthesis support, synthetic visualization based on syllable count\n// https://codepen.io/matt-west/pen/wGzuJ\n// msg = new SpeechSynthesisUtterance(); msg.text = \"hello world\";  speechSynthesis.speak(msg);\nvar EventEmitter = require('events');\n\nvar async = require('async');\n\nvar SayQueue = require('./queue');\n\nvar profiles = require('./profiles');\n\nvar MonauralScope = require('./monauralscope');\n\nfunction getAudioContext() {\n  var audioContext;\n\n  if (window.AudioContext) {\n    audioContext = new window.AudioContext();\n  } else if (window.webkitAudioContext) {\n    console.log('creating webkitAudioContext');\n    audioContext = new window.webkitAudioContext();\n  } else {\n    throw new Error('no AudioContext');\n    return;\n  }\n\n  return audioContext;\n}\n\nvar variants = ['f1', 'f2', 'f3', 'f4', 'f5', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'croak', 'klatt', 'klatt2', 'klatt3', 'whisper', 'whisperf'];\nvar languageIds = {\n  'ca': 'Catalan',\n  'cs': 'Czech',\n  'de': 'German',\n  'el': 'Greek',\n  'en/en': 'English',\n  'en/en-n': 'English (N)',\n  'en/en-rp': 'English (RP)',\n  'en/en-sc': 'English (Scottish)',\n  'en/en-us': 'English (US)',\n  'en/en-wm': 'English (WM)',\n  'eo': 'Esperanto',\n  'es': 'Spanish',\n  'es-la': 'Spanish (Latin America)',\n  'fi': 'Finnish',\n  'fr': 'French',\n  'hu': 'Hungarian',\n  'it': 'Italian',\n  'kn': 'Kannada',\n  'la': 'Latin',\n  'lv': 'Latvian',\n  'nl': 'Dutch',\n  'pl': 'Polish',\n  'pt': 'Portuguese (Brazil)',\n  'pt-pt': 'Portuguese, European',\n  'ro': 'Romanian',\n  'sk': 'Slovak',\n  'sv': 'Swedish',\n  'tr': 'Turkish',\n  'zh': 'Chinese (Mandarin)',\n  'zh-yue': 'Chinese (Cantonese)'\n};\n\nvar Say =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(Say, _EventEmitter);\n\n  function Say(options) {\n    var _this;\n\n    _classCallCheck(this, Say);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Say).call(this));\n    if (!options) options = {};\n    _this.lang = null;\n    _this.profiles = {};\n    _this.defaultProfile = null;\n\n    for (var name in profiles) {\n      _this.addProfile(profiles[name]);\n    }\n\n    if (options.profile) {\n      _this.setProfile(options.profile);\n    } else {\n      _this.setProfile('Jack');\n    }\n\n    if (_this.profile.engine === 'espeak') {\n      if (options.language) {\n        _this.setLanguage(options.language);\n      }\n    }\n\n    if (!_this.lang) {\n      _this.setLanguage('en_us');\n    }\n\n    if (options.visualizer) {\n      _this.setVisualizer(options.visualizer);\n    }\n\n    return _this;\n  }\n\n  _createClass(Say, [{\n    key: \"setVisualizer\",\n    value: function setVisualizer(vis) {\n      this.visualizer = vis;\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(lang) {\n      this.lang = Say.getLanguageId(lang);\n    }\n  }, {\n    key: \"processOptions\",\n    value: function processOptions(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var profileName = options.profile ? options.profile : this.defaultProfile;\n      var profile = this.profiles[profileName]['default'];\n      var v = Object.assign({}, profile);\n      if (options.slow) v.speed = this.profiles[profileName]['slow'].speed;\n      if (options.fast) v.speed = this.profiles[profileName]['fast'].speed;\n      if (options.low) v.pitch = this.profiles[profileName]['low'].pitch;\n      if (options.high) v.pitch = this.profiles[profileName]['high'].pitch; // if (options.pitch) v.pitch = this.profiles[profileName]['pitch'].pitch;\n\n      if (options.pitch) v.pitch = options.pitch; // if (options.speed) v.speed = this.profiles[profileName]['speed'].speed;\n\n      if (options.speed) v.speed = options.speed;\n\n      if (options.language) {\n        v.voice = Say.getLanguageId(options.language);\n      } else {\n        v.voice = this.lang;\n      }\n\n      if (options.delay) {\n        v.delay = options.delay;\n      }\n\n      return v;\n    }\n  }, {\n    key: \"say\",\n    value: function say(text, options) {\n      var _this2 = this;\n\n      options = options || {};\n\n      if (this.visualizer) {\n        return new Promise(function (resolve) {\n          _this2.getWorkerAudioData(text, options, function (audioContext, source) {\n            _this2.visualizer.loadAudioData(audioContext, source, resolve);\n          });\n        });\n      } else {\n        return new Promise(function (resolve) {\n          _this2.getWorkerAudioData(text, options, function (audioContext, source) {\n            if (options.profile === 'Borg') {\n              var audioBuffer = source.buffer; // attempt to mitigate audio click/pops at the end of the clip using a gain node\n\n              var gainNode = audioContext.createGain();\n              gainNode.gain.setValueAtTime(1, 0);\n              gainNode.gain.setValueAtTime(1, audioBuffer.duration - 0.5);\n              gainNode.gain.linearRampToValueAtTime(0.0001, audioBuffer.duration - 0.2);\n              source.connect(gainNode);\n              gainNode.connect(audioContext.destination);\n              var didexit = false;\n              setTimeout(function () {\n                if (!didexit) {\n                  didexit = true; // stopping early seems to help with click/pops as well\n\n                  source.stop();\n                  audioContext.close();\n                  resolve();\n                }\n              }, audioBuffer.duration * 1000 - 200); // stop 0.2s early\n\n              source.onended = function () {\n                if (!didexit) {\n                  didexit = true;\n                  audioContext.close();\n                  resolve();\n                }\n              };\n\n              source.start(0);\n            } else {\n              source.connect(audioContext.destination);\n\n              source.onended = function () {\n                audioContext.close();\n                resolve();\n              };\n\n              source.start(0);\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"getWorkerAudioData\",\n    value: function getWorkerAudioData(text, options, callback) {\n      text = text.toLowerCase();\n      if (!options) options = {};\n      var profileName = options.profile || this.defaultProfile;\n\n      if (profileName === 'Borg') {\n        this.borgGetAudioData(text, options, callback);\n      } else {\n        if (!profileName) profileName = 'Jack';\n        var profile = this.profiles[profileName];\n\n        if (!profile) {\n          throw new Error('no profile: ' + profileName);\n        }\n\n        var engine = profile.engine;\n        var workerPath;\n\n        if (engine === 'sam') {\n          workerPath = Say.workers.sam;\n        } else if (engine === 'espeak') {\n          if (typeof Say.workers.espeak === 'string') {\n            workerPath = Say.workers.espeak;\n          } else if (Say.workers.espeak.length) {\n            var lang = options.language;\n\n            if (lang.startsWith('en-')) {\n              lang = 'en/' + l;\n            }\n\n            for (var i = 0; i < Say.workers.espeak.length; i++) {\n              if (Say.workers.espeak[i].language === lang) {\n                workerPath = Say.workers.espeak[i].path;\n                break;\n              }\n            }\n          }\n        }\n\n        if (!workerPath) throw new Error('no worker path for this language');\n        var worker = new Worker(workerPath);\n        worker.addEventListener('message', function (e) {\n          console.log('received from worker:', e.data);\n\n          if (e.data.rawdata) {\n            var audioContext = getAudioContext();\n\n            if (!audioContext || !audioContext.createBufferSource) {\n              console.log('no audioContext 2');\n              debugger;\n              return;\n            }\n\n            var source = audioContext.createBufferSource();\n            var data = e.data.rawdata;\n\n            if (options.rawAudioData) {\n              callback(data);\n            } else {\n              if (engine === 'sam') {\n                var audioBuffer = audioContext.createBuffer(1, data.length, 22050);\n                var buffer = audioBuffer.getChannelData(0);\n\n                for (var _i = 0; _i < data.length; _i++) {\n                  buffer[_i] = data[_i];\n                }\n\n                source.buffer = audioBuffer;\n                console.log('returning sam');\n                callback(audioContext, source);\n              } else {\n                audioContext.decodeAudioData(data, function (buffer) {\n                  source.buffer = buffer;\n                  callback(audioContext, source);\n                }, function (e) {\n                  console.log('error', e);\n                });\n              }\n            }\n          }\n        }, false);\n        var voptions = this.processOptions(options);\n        worker.postMessage({\n          cmd: 'speak',\n          text: text,\n          options: voptions\n        });\n      }\n    }\n  }, {\n    key: \"replacementsFor\",\n    value: function replacementsFor(text, replacements) {\n      replacements.forEach(function (replacement) {\n        var from = replacement[0];\n        var to = replacement[1];\n        text = text.replace(new RegExp(from, 'gi'), to);\n      });\n      return text;\n    } // todo:\n    // multipartData() {\n    // \tvar parts = [\n    // \t\t{ text: \"Travel to\",      voice: \"en/en-us\", variant: \"m3\" },\n    // \t\t{ text: \"Paris\",          voice: \"fr\",       variant: \"f5\" },\n    // \t\t{ text: \"at light speed\", voice: \"en/en-us\", variant: \"m3\" }\n    // \t];\n    // }\n\n  }, {\n    key: \"addProfile\",\n    value: function addProfile(profile) {\n      var profileTypes = ['high', 'low', 'fast', 'slow'];\n      profileTypes.forEach(function (type) {\n        if (type !== 'default' && type !== 'name') {\n          var p = Object.assign({}, profile['default']);\n\n          for (var i in profile[type]) {\n            p[i] = profile[type][i];\n          }\n\n          profile[type] = p;\n        }\n      });\n      this.profiles[profile.name] = profile;\n    }\n  }, {\n    key: \"setProfile\",\n    value: function setProfile(name) {\n      this.defaultProfile = name;\n      this.profile = profiles[name];\n      return this;\n    }\n  }, {\n    key: \"borgGetAudioData\",\n    value: function borgGetAudioData(text, options, callback) {\n      var _this3 = this;\n\n      text += '....'; // add some silence to the end\n\n      var voices = [];\n      var lang = options && options.language ? options.language : this.lang;\n      var audioContext = getAudioContext();\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Jack',\n          language: lang,\n          speed: 160,\n          pitch: 1,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Jack',\n          language: lang,\n          speed: 160,\n          pitch: 40,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Roy',\n          language: lang,\n          speed: 160,\n          pitch: 30,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Roy',\n          language: lang,\n          speed: 160,\n          pitch: 30,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Leon',\n          language: lang,\n          speed: 160,\n          pitch: 20,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Xenu',\n          language: lang,\n          speed: 166,\n          pitch: 5,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      async.parallel(voices, function (err, results) {\n        if (results) {\n          var maxLength = 0;\n          var maxDuration = 0;\n          var sampleRate = 0;\n          results.forEach(function (result) {\n            var buffer = result[1];\n            maxLength = Math.max(maxLength, buffer.length);\n            maxDuration = Math.max(maxDuration, buffer.duration);\n            sampleRate = buffer.sampleRate;\n          });\n\n          var _audioContext = getAudioContext();\n\n          var audioBuffer = _audioContext.createBuffer(2, sampleRate * maxDuration, sampleRate);\n\n          var channgelToggle = false;\n          results.forEach(function (result) {\n            var buffer = result[1];\n\n            if (channgelToggle) {\n              var leftInBuffer = buffer.getChannelData(0);\n              var leftOutBuffer = audioBuffer.getChannelData(0);\n\n              for (var i = 0; i < maxLength; i++) {\n                if (i > leftOutBuffer.length) leftOutBuffer[i] = 0;\n                leftOutBuffer[i] += leftInBuffer[i];\n              }\n            } else {\n              var rightInBuffer = buffer.getChannelData(0);\n              var rightOutBuffer = audioBuffer.getChannelData(1);\n\n              for (var _i2 = 0; _i2 < maxLength; _i2++) {\n                if (_i2 > rightInBuffer.length) rightOutBuffer[_i2] = 0;else rightOutBuffer[_i2] += rightInBuffer[_i2];\n              }\n            }\n\n            channgelToggle = !channgelToggle;\n          });\n\n          var source = _audioContext.createBufferSource();\n\n          source.buffer = audioBuffer;\n          callback(_audioContext, source);\n        }\n      });\n    }\n  }]);\n\n  return Say;\n}(EventEmitter);\n\nSay.variants = variants;\nSay.profiles = profiles;\nSay.languageIds = languageIds;\n\nSay.getLanguageId = function (lang) {\n  if (lang.indexOf('_') > -1) lang = lang.replace('_', '-');\n  if (lang.startsWith('en') && lang.indexOf('/') === -1) lang = 'en/' + lang;\n  return lang;\n};\n\nSay.addProfile = function (profile) {\n  for (var name in profile) {\n    Say.profiles[name] = profile[name];\n  }\n};\n\nSay.setWorkers = function (workers) {\n  Say.workers = workers;\n};\n\nvar sayQueue = new SayQueue(new Say());\nSay.queue = sayQueue.queue.bind(sayQueue);\nSay.clearQueue = sayQueue.clearQueue.bind(sayQueue);\nSay.on = sayQueue.on.bind(sayQueue);\nSay.once = sayQueue.once.bind(sayQueue);\nmodule.exports = Say;\nmodule.exports.MonauralScope = MonauralScope;","var _classCallCheck = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/inherits\");\n\nvar EventEmitter = require(\"events\");\n\nvar SpeakerQueue =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(SpeakerQueue, _EventEmitter);\n\n  function SpeakerQueue(speak) {\n    var _this;\n\n    _classCallCheck(this, SpeakerQueue);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SpeakerQueue).call(this));\n    _this._queue = [];\n    _this.speaker = speak;\n    return _this;\n  }\n\n  _createClass(SpeakerQueue, [{\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      this._queue = [];\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(speech) {\n      this._queue.push(speech);\n\n      this._speakNext();\n    }\n  }, {\n    key: \"_speakNext\",\n    value: function _speakNext() {\n      var _this2 = this;\n\n      if (this.isSpeaking) {\n        return;\n      }\n\n      var next = this._queue.shift();\n\n      if (next) {\n        this.isSpeaking = true;\n        this.speaker.getWorkerAudioData(next.text, next.options, function (audioContext, source) {\n          if (next.onStart) {\n            next.onStart(next);\n          }\n\n          next.scope.loadAudioData(audioContext, source, function () {\n            if (next.onStop) {\n              setTimeout(function () {\n                next.onStop(next);\n              }, 1);\n            }\n\n            _this2._onEnded();\n          });\n        });\n      } else {\n        this.emit('finish');\n      }\n    }\n  }, {\n    key: \"_onEnded\",\n    value: function _onEnded() {\n      this.isSpeaking = false;\n\n      this._speakNext();\n    }\n  }]);\n\n  return SpeakerQueue;\n}(EventEmitter);\n\nmodule.exports = SpeakerQueue;","module.exports = {\n  \"Jack\": {\n    \"name\": \"Jack\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 10,\n      speed: 180,\n      variant: 'm2'\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 0\n    },\n    \"slow\": {\n      speed: 120\n    },\n    \"fast\": {\n      speed: 250\n    }\n  },\n  \"Pris\": {\n    \"name\": \"Pris\",\n    \"phoneticName\": \"Priss\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 47,\n      speed: 130,\n      variant: 'f5'\n    },\n    \"high\": {\n      pitch: 80\n    },\n    \"low\": {\n      pitch: 20\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Roy\": {\n    \"name\": \"Roy\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 35,\n      speed: 180,\n      variant: 'm1'\n    },\n    \"high\": {\n      pitch: 3\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Scotty\": {\n    \"name\": \"Scotty\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 35,\n      speed: 200,\n      variant: 'm3'\n    },\n    \"high\": {\n      pitch: 3\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 230\n    }\n  },\n  \"Xenu\": {\n    \"name\": \"Xenu\",\n    \"phoneticName\": \"zee-new\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 1,\n      pitch: 35,\n      speed: 170,\n      variant: 'klatt3'\n    },\n    \"high\": {\n      pitch: 65\n    },\n    \"low\": {\n      pitch: 0\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Cylon\": {\n    \"name\": \"Cylon\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 1,\n      pitch: 35,\n      speed: 170,\n      variant: 'whisperf'\n    },\n    \"high\": {\n      pitch: 65,\n      speed: 150\n    },\n    \"low\": {\n      pitch: 0,\n      speed: 140\n    },\n    \"slow\": {\n      pitch: 20,\n      speed: 100,\n      wordgap: 1\n    },\n    \"fast\": {\n      speed: 200,\n      wordgap: 0\n    }\n  },\n  \"Leon\": {\n    \"name\": \"Leon\",\n    \"phoneticName\": \"Leeon\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 40,\n      speed: 150,\n      variant: 'm7'\n    },\n    \"high\": {\n      pitch: 55\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Rachel\": {\n    \"name\": \"Rachel\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 60,\n      speed: 150,\n      variant: 'f2'\n    },\n    \"high\": {\n      pitch: 75\n    },\n    \"low\": {\n      pitch: 40\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Zhora\": {\n    \"name\": \"Zhora\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 60,\n      speed: 150,\n      variant: 'f4'\n    },\n    \"high\": {\n      pitch: 75\n    },\n    \"low\": {\n      pitch: 40\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Borg\": {\n    \"name\": \"Borg\",\n    \"engine\": \"espeak\",\n    \"default\": {}\n  },\n  \"Sam\": {\n    \"name\": \"Sam\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 64,\n      pitch: 64,\n      throat: 128,\n      mouth: 128\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 110\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 40\n    }\n  },\n  \"Elf\": {\n    \"name\": \"Elf\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 72,\n      pitch: 64,\n      throat: 110,\n      mouth: 160\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 110\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 40\n    }\n  },\n  \"Robo\": {\n    \"name\": \"Robo\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 82,\n      pitch: 60,\n      throat: 190,\n      mouth: 190\n    },\n    \"high\": {\n      pitch: 40\n    },\n    \"low\": {\n      pitch: 100\n    },\n    \"slow\": {\n      speed: 120\n    },\n    \"fast\": {\n      speed: 50\n    }\n  },\n  \"Granny\": {\n    \"name\": \"Granny\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 82,\n      pitch: 35,\n      throat: 145,\n      mouth: 145\n    },\n    \"high\": {\n      pitch: 25\n    },\n    \"low\": {\n      pitch: 120\n    },\n    \"slow\": {\n      speed: 130\n    },\n    \"fast\": {\n      speed: 40\n    }\n  }\n};","var _classCallCheck = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/full-example/node_modules/@babel/runtime/helpers/inherits\");\n\nvar EventEmitter = require(\"events\");\n\nvar MonauralScope =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(MonauralScope, _EventEmitter);\n\n  function MonauralScope(canvas, options) {\n    var _this;\n\n    _classCallCheck(this, MonauralScope);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MonauralScope).call(this));\n    if (!options) options = {};\n    _this.canvas = canvas;\n    _this.width = _this.canvas.width;\n    _this.height = _this.canvas.height;\n    _this.audioContext = null;\n    _this.meter = null;\n    _this.mediaStreamSource = null;\n    _this._draw = _this.draw.bind(_assertThisInitialized(_this));\n    _this.isRecording = false;\n\n    _this.setTheme({\n      lineWidth: options.lineWidth || 3,\n      strokeColor: options.strokeColor || '#FF0000',\n      clipColor: options.clipColor || options.strokeColor || '#FF0000',\n      fillColor: options.fillColor || 'rgba(255,0,0,0.1)',\n      bgOnColor: options.bgOnColor || null,\n      bgOffColor: options.bgOffColor || null,\n      dotColor: options.dotColor || '#FF0000',\n      dotSize: options.dotSize || 3,\n      background: options.background || null\n    });\n\n    return _this;\n  }\n\n  _createClass(MonauralScope, [{\n    key: \"setTheme\",\n    value: function setTheme(options) {\n      this.theme = options;\n      this.draw();\n    }\n  }, {\n    key: \"createAudioMeter\",\n    value: function createAudioMeter(audioContext, clipLevel, averaging, clipLag) {\n      // this.audioContext = audioContext;\n      var processor = audioContext.createScriptProcessor(512); //this.processor = processor;\n\n      processor.onaudioprocess = function (event) {\n        var buf = event.inputBuffer.getChannelData(0);\n        var bufLength = buf.length;\n        var sum = 0;\n        var x; // Do a root-mean-square on the samples: sum up the squares...\n\n        for (var i = 0; i < bufLength; i++) {\n          x = buf[i];\n\n          if (Math.abs(x) >= this.clipLevel) {\n            this.clipping = true;\n            this.lastClip = window.performance.now();\n          }\n\n          sum += x * x;\n        } // ... then take the square root of the sum.\n\n\n        var rms = Math.sqrt(sum / bufLength); // Now smooth this out with the averaging factor applied\n        // to the previous sample - take the max here because we\n        // want \"fast attack, slow release.\"\n\n        this.volume = Math.max(rms, this.volume * this.averaging); // console.log('onaudioprocess', this.volume);\n\n        if (!this.maxVolume) this.maxVolume = this.volume;\n        this.maxVolume = Math.max(this.volume, this.maxVolume);\n      };\n\n      processor.clipping = false;\n      processor.lastClip = 0;\n      processor.volume = 0;\n      processor.clipLevel = clipLevel || 0.99; //0.98;\n\n      processor.averaging = averaging || 0.97; //0.95;\n\n      processor.clipLag = clipLag || 500; //750;\n\n      processor.connect(audioContext.destination);\n\n      processor.checkClipping = function () {\n        if (!this.clipping) return false;\n        if (this.lastClip + this.clipLag < window.performance.now()) this.clipping = false;\n        return this.clipping;\n      };\n\n      processor.shutdown = function () {\n        this.disconnect();\n        this.onaudioprocess = null;\n      };\n\n      return processor;\n    }\n  }, {\n    key: \"setIsRecording\",\n    value: function setIsRecording(isRecording) {\n      if (this.isRecording === isRecording) {\n        console.log('same');\n        return;\n      }\n\n      this.isRecording = isRecording;\n      if (isRecording) this.startRecording();else this.stopRecording();\n    }\n  }, {\n    key: \"stopRecording\",\n    value: function stopRecording() {\n      if (this.isRecording) {\n        // if (this.audioContext) {\n        // \tif (this.meter) {\n        // \t\tthis.meter.disconnect(this.audioContext.destination);\n        // \t}\n        // } else {\n        // \tconsole.log('error: no audioContext');\n        // }\n        if (this.mediaStreamSource && this.meter) {\n          this.mediaStreamSource.disconnect(this.meter);\n        }\n\n        if (this.meter) {\n          this.meter.shutdown();\n        }\n\n        if (this.audioContext) {\n          this.audioContext.close();\n        }\n      }\n\n      this.isRecording = false;\n      this.isDrawing = false;\n    } // start and stop the mic to bring up the request dialog\n\n  }, {\n    key: \"requestMic\",\n    value: function requestMic() {\n      var _this2 = this;\n\n      this.startRecording(function () {\n        // sucess\n        _this2.stopRecording();\n      }, function () {\n        // error\n        _this2.stopRecording();\n      });\n    }\n  }, {\n    key: \"startRecording\",\n    value: function startRecording(successcb, errorcb) {\n      var _this3 = this;\n\n      if (this.isRecording) {\n        console.log('already recording');\n        return;\n      }\n\n      console.log('startRecording');\n      this.isRecording = true;\n\n      var _AudioContext = window.AudioContext || window.webkitAudioContext;\n\n      var audioContext = new _AudioContext();\n      this.audioContext = audioContext;\n\n      var success = function success(stream) {\n        console.log('startRecording success');\n\n        if (_this3.audioContext) {\n          try {\n            _this3.mediaStreamSource = audioContext.createMediaStreamSource(stream);\n            _this3.meter = _this3.createAudioMeter(audioContext);\n\n            _this3.mediaStreamSource.connect(_this3.meter);\n\n            _this3.startDrawing();\n\n            if (successcb) successcb();\n          } catch (e) {\n            if (errorcb) errorcb();\n          }\n        }\n      };\n\n      var fail = function fail(e) {\n        console.log('startRecording fail'); //debugger;\n\n        if (errorcb) errorcb();\n      };\n\n      try {\n        // let getUserMedia = get_user_media || navigator.webkitGetUserMedia;\n        // get_user_media = get_user_media || navigator.mozGetUserMedia;\n        // let getUserMedia = navigator.getUserMedia || (navigator.webkitGetUserMedia || navigator.mediaDevices.getUserMedia);\n        if (navigator.getUserMedia) {\n          navigator.getUserMedia({\n            \"audio\": {\n              \"mandatory\": {\n                \"googEchoCancellation\": \"false\",\n                \"googAutoGainControl\": \"false\",\n                \"googNoiseSuppression\": \"false\",\n                \"googHighpassFilter\": \"false\"\n              },\n              \"optional\": []\n            }\n          }, success, fail);\n        } else {\n          if (navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices.getUserMedia({\n              \"audio\": {\n                \"mandatory\": {\n                  \"googEchoCancellation\": \"false\",\n                  \"googAutoGainControl\": \"false\",\n                  \"googNoiseSuppression\": \"false\",\n                  \"googHighpassFilter\": \"false\"\n                },\n                \"optional\": []\n              }\n            }, success, fail);\n          } else {\n            throw new Error('no getUserMedia');\n            return;\n          }\n        }\n      } catch (e) {\n        alert('getUserMedia threw exception :' + e);\n      }\n    }\n  }, {\n    key: \"loadAudioData\",\n    value: function loadAudioData(audioContext, source, callback) {\n      var _this4 = this;\n\n      this.audioContext = audioContext;\n      this.source = source;\n      source.connect(audioContext.destination);\n      var meter = this.createAudioMeter(audioContext);\n      this.meter = meter;\n      source.connect(this.meter);\n\n      source.onended = function () {\n        _this4.isPlaying = false; // source.disconnect(audioContext.destination);\n\n        source.disconnect();\n        delete source.buffer; // this.meter.shutdown();\n\n        source.stop();\n\n        _this4.stopDrawing();\n\n        audioContext.close(); // source.disconnect();\n\n        if (callback) callback();\n      };\n\n      this.isPlaying = true;\n      this.startDrawing();\n      source.start(0);\n    }\n  }, {\n    key: \"startDrawing\",\n    value: function startDrawing() {\n      this.isDrawing = true;\n      this.draw();\n    }\n  }, {\n    key: \"stopDrawing\",\n    value: function stopDrawing() {\n      this.meter.volume = 0;\n      this.draw();\n      this.isDrawing = false;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      if (!this.canvas) {\n        console.log('no canvas');\n        return;\n      }\n\n      var ctx = this.canvas.getContext('2d');\n\n      if (this.theme.background) {\n        ctx.fillStyle = this.theme.background;\n        ctx.fillRect(0, 0, this.width, this.height);\n      } else {\n        ctx.clearRect(0, 0, this.width, this.height);\n      }\n\n      if (this.theme.bgOnColor || this.theme.bgOffColor) {\n        var maxsize = Math.min(this.width, this.height) / 2 - ctx.lineWidth;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, maxsize, 0, 2 * Math.PI, false);\n        ctx.fillStyle = this.isPlaying || this.isRecording ? this.theme.bgOnColor : this.theme.bgOffColor;\n        ctx.fill();\n        ctx.closePath();\n      }\n\n      ctx.lineWidth = this.theme.lineWidth;\n\n      if (this.theme.dotSize) {\n        var size = this.theme.dotSize;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, size, 0, 2 * Math.PI, false);\n        ctx.fillStyle = this.theme.dotColor;\n        ctx.fill();\n        ctx.closePath();\n      }\n\n      if (!this.isRecording && !this.isDrawing) {\n        console.log('not drawing');\n      } else {\n        // console.log('IS drawing ', this.meter.volume);\n        if (!this.meter) {\n          console.error('no meter'); // this.startDrawing();\n          // this.startRecording();\n\n          return;\n        }\n\n        ctx.strokeStyle = this.meter.checkClipping() ? this.theme.clipColor : this.theme.strokeColor;\n\n        var _maxsize = Math.min(this.width, this.height) / 2 - ctx.lineWidth;\n\n        var _size = this.meter.volume * _maxsize * 5;\n\n        if (_size > this.width / 2 - this.theme.lineWidth) _size = this.width / 2 - this.theme.lineWidth;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, _size, 0, 2 * Math.PI, false);\n\n        if (this.theme.fillColor) {\n          ctx.fillStyle = this.theme.fillColor;\n          ctx.fill();\n        }\n\n        ctx.stroke();\n        ctx.closePath();\n\n        if (this.isDrawing) {\n          window.requestAnimationFrame(this._draw);\n        }\n      }\n    }\n  }]);\n\n  return MonauralScope;\n}(EventEmitter);\n\nmodule.exports = MonauralScope;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SayApp from './SayApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<SayApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}