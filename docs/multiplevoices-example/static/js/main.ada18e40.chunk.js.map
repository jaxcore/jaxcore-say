{"version":3,"sources":["../../../index.js","MultipleSpeakersApp.js","../../../lib/say.js","../../../lib/queue.js","../../../lib/profiles.js","../../../lib/monauralscope.js","serviceWorker.js","index.js"],"names":["module","exports","global","Say","setWorkers","MultipleSpeakersApp","redRef","React","createRef","orangeRef","yellowRef","greenRef","cyanRef","blueRef","purpleRef","brownRef","state","text","activeSpeakers","red","orange","yellow","green","cyan","blue","purple","brown","app","colors","getTheme","color","strokeColor","clipColor","fillColor","dotColor","bgOffColor","bgOnColor","this","scopes","MonauralScope","current","id","className","ref","width","height","onClick","e","introduceYourselves","clearQueue","active","setState","once","console","log","queue","scope","options","profile","language","onStart","setActiveSpeaker","onStop","Component","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","EventEmitter","async","SayQueue","profiles","getAudioContext","audioContext","window","AudioContext","webkitAudioContext","Error","_EventEmitter","_this","name","call","lang","defaultProfile","addProfile","setProfile","engine","setLanguage","visualizer","setVisualizer","key","value","vis","getLanguageId","profileName","v","Object","assign","slow","speed","fast","low","pitch","high","wordgap","amplitude","voice","delay","replacements","replacementText","corrections","_loop","r","RegExp","test","replace","m","a","makeReplacements","_this2","Promise","resolve","getWorkerAudioData","source","loadAudioData","audioBuffer","buffer","gainNode","createGain","gain","setValueAtTime","duration","linearRampToValueAtTime","connect","destination","didexit","setTimeout","stop","close","onended","start","callback","toLowerCase","borgGetAudioData","workerPath","workers","sam","espeak","length","startsWith","l","i","path","worker","Worker","addEventListener","data","rawdata","createBufferSource","rawAudioData","createBuffer","getChannelData","_i","decodeAudioData","voptions","processOptions","postMessage","cmd","forEach","type","p","_this3","voices","push","parallel","err","results","maxLength","maxDuration","sampleRate","result","Math","max","_audioContext","channgelToggle","leftInBuffer","leftOutBuffer","rightInBuffer","rightOutBuffer","_i2","variants","languageIds","indexOf","sayQueue","bind","on","SpeakerQueue","speak","_queue","speaker","speech","_speakNext","isSpeaking","next","shift","_onEnded","emit","variant","throat","mouth","_assertThisInitialized","canvas","meter","mediaStreamSource","_draw","draw","isRecording","setTheme","lineWidth","dotSize","background","theme","clipLevel","averaging","clipLag","processor","createScriptProcessor","onaudioprocess","event","x","buf","inputBuffer","bufLength","sum","abs","clipping","lastClip","performance","now","rms","sqrt","volume","maxVolume","checkClipping","shutdown","disconnect","startRecording","stopRecording","isDrawing","successcb","errorcb","success","stream","createMediaStreamSource","createAudioMeter","startDrawing","fail","navigator","getUserMedia","mediaDevices","alert","_this4","isPlaying","stopDrawing","ctx","getContext","fillStyle","fillRect","clearRect","maxsize","min","beginPath","arc","PI","fill","closePath","size","error","strokeStyle","_maxsize","_size","stroke","requestAnimationFrame","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ada18e40.chunk.js","sourcesContent":["module.exports = require('./lib/say');","import React, {Component} from 'react';\nimport Say from 'jaxcore-say';\nimport {MonauralScope} from 'jaxcore-say';\n\nglobal.Say = Say;\n\nSay.setWorkers({\n\t'espeak': 'webworkers/espeak-all-worker.js',\n\t\n\t// if you only need one language (english, french, spanish) then only load that worker\n\t// 'espeak': 'webworkers/espeak-en-worker.js',\n\t\n\t// // the following format is mainly just for this demo for testing the individual language builds\n\t// 'espeak': [\n\t// \t{\n\t// \t\tlanguage: 'en',\n\t// \t\tpath: 'webworkers/espeak-en-worker.js'\n\t// \t},\n\t// \t{\n\t// \t\tlanguage: 'es',\n\t// \t\tpath: 'webworkers/espeak-es-worker.js'\n\t// \t},\n\t// \t{\n\t// \t\tlanguage: 'fr',\n\t// \t\tpath: 'webworkers/espeak-fr-worker.js'\n\t// \t},\n\t// ],\n\t\n\t'sam': 'webworkers/sam-worker.js'\n});\n\nclass MultipleSpeakersApp extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\t\n\t\tthis.redRef = React.createRef();\n\t\tthis.orangeRef = React.createRef();\n\t\tthis.yellowRef = React.createRef();\n\t\tthis.greenRef = React.createRef();\n\t\tthis.cyanRef = React.createRef();\n\t\tthis.blueRef = React.createRef();\n\t\tthis.purpleRef = React.createRef();\n\t\tthis.brownRef = React.createRef();\n\t\t\n\t\tthis.state = {\n\t\t\ttext: '',\n\t\t\tactiveSpeakers: {\n\t\t\t\tred: false,\n\t\t\t\torange: false,\n\t\t\t\tyellow: false,\n\t\t\t\tgreen: false,\n\t\t\t\tcyan: false,\n\t\t\t\tblue: false,\n\t\t\t\tpurple: false,\n\t\t\t\tbrown: false\n\t\t\t}\n\t\t};\n\t\t\n\t\tglobal.app = this;\n\t}\n\t\n\tcomponentDidMount() {\n\t\tconst colors = {\n\t\t\tred: '255,0,0',\n\t\t\torange: '255,128,0',\n\t\t\tyellow: '255,255,0',\n\t\t\tgreen: '0,255,0',\n\t\t\tcyan: '0,255,255',\n\t\t\tblue: '0,0,255',\n\t\t\tpurple: '255,0,255',\n\t\t\tbrown: '150,75,0'\n\t\t};\n\t\t\n\t\tconst getTheme = function (color) {\n\t\t\treturn {\n\t\t\t\tstrokeColor: 'rgb(' + colors[color] + ')',\n\t\t\t\tclipColor: 'black',\n\t\t\t\tfillColor: 'rgba(' + colors[color] + ',0.2)',\n\t\t\t\tdotColor: 'rgb(' + colors[color] + ')',\n\t\t\t\tbgOffColor: '#fafafa',\n\t\t\t\tbgOnColor: '#eee'\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.scopes = {\n\t\t\tred: new MonauralScope(this.redRef.current, getTheme('red')),\n\t\t\torange: new MonauralScope(this.orangeRef.current, getTheme('orange')),\n\t\t\tyellow: new MonauralScope(this.yellowRef.current, getTheme('yellow')),\n\t\t\tgreen: new MonauralScope(this.greenRef.current, getTheme('green')),\n\t\t\tcyan: new MonauralScope(this.cyanRef.current, getTheme('cyan')),\n\t\t\tblue: new MonauralScope(this.blueRef.current, getTheme('blue')),\n\t\t\tpurple: new MonauralScope(this.purpleRef.current, getTheme('purple')),\n\t\t\tbrown: new MonauralScope(this.brownRef.current, getTheme('brown'))\n\t\t};\n\t\t\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t\n\t\t\t\t<h3>Multiple Voices Example</h3>\n\t\t\t\t\n\t\t\t\t<div id=\"scopes\">\n\t\t\t\t\t<div id=\"red\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.red?' active':'')}>Jack</div>\n\t\t\t\t\t\t<canvas ref={this.redRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"orange\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.orange?' active':'')}>Scotty</div>\n\t\t\t\t\t\t<canvas ref={this.orangeRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"yellow\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.yellow?' active':'')}>Roy</div>\n\t\t\t\t\t\t<canvas ref={this.yellowRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"green\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.green?' active':'')}>Leon</div>\n\t\t\t\t\t\t<canvas ref={this.greenRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"cyan\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.cyan?' active':'')}>Robo</div>\n\t\t\t\t\t\t<canvas ref={this.cyanRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"blue\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.blue?' active':'')}>Zhora</div>\n\t\t\t\t\t\t<canvas ref={this.blueRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"purple\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.purple?' active':'')}>Cylon</div>\n\t\t\t\t\t\t<canvas ref={this.purpleRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"brown\">\n\t\t\t\t\t\t<div className={\"speakername\"+(this.state.activeSpeakers.brown?' active':'')}>Borg</div>\n\t\t\t\t\t\t<canvas ref={this.brownRef} width=\"100\" height=\"100\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div id=\"controls\">\n\t\t\t\t\t<button onClick={e => this.introduceYourselves()}>Introduce Yourselves</button>\n\t\t\t\t\t<button onClick={e => this.clearQueue()}>Stop</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\tclearQueue() {\n\t\tSay.clearQueue();\n\t}\n\t\n\tsetActiveSpeaker(color, active) {\n\t\tconst {activeSpeakers} = this.state;\n\t\tactiveSpeakers[color] = active;\n\t\tthis.setState(activeSpeakers);\n\t}\n\t\n\tintroduceYourselves() {\n\t\t\n\t\tSay.once('finish', () => {\n\t\t\tconsole.log('queue finished');\n\t\t});\n\t\t\n\t\tSay.queue({\n\t\t\ttext: \"hello, i am jack\",\n\t\t\tscope: this.scopes.red,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Jack',\n\t\t\t\tlanguage: 'en'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Jack saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('red', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Jack finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('red', false);\n\t\t\t}\n\t\t});\n\t\t\n\t\tSay.queue({\n\t\t\ttext: \"aye this is scotty, gled to meet you\",\n\t\t\tscope: this.scopes.orange,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Scotty',\n\t\t\t\tlanguage: 'en-sc'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Scotty saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('orange', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Scotty finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('orange', false);\n\t\t\t}\n\t\t});\n\t\t\n\n\t\tSay.queue({\n\t\t\ttext: \"this is roy, at your service\",\n\t\t\tscope: this.scopes.yellow,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Roy',\n\t\t\t\tlanguage: 'en-wm'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Roy saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('yellow', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Roy finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('yellow', false);\n\t\t\t}\n\t\t});\n\n\t\tSay.queue({\n\t\t\ttext: \"hola, mi nombre es leon\",\n\t\t\tscope: this.scopes.green,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Leon',\n\t\t\t\tlanguage: 'es'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Leon saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('green', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Leon finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('green', false);\n\t\t\t}\n\t\t});\n\t\t\n\t\tSay.queue({\n\t\t\ttext: \"greetings, i am robo\",\n\t\t\tscope: this.scopes.cyan,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Robo'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Robo saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('cyan', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Robo finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('cyan', false);\n\t\t\t}\n\t\t});\n\n\t\tSay.queue({\n\t\t\ttext: \"bonjour. je m'appelle zhora\",\n\t\t\tscope: this.scopes.blue,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Zhora',\n\t\t\t\tlanguage: 'fr'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Zhora saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('blue', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Zhora finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('blue', false);\n\t\t\t}\n\t\t});\n\n\t\tSay.queue({\n\t\t\ttext: \"we are the cylon\",\n\t\t\tscope: this.scopes.purple,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Cylon',\n\t\t\t\tlanguage: 'en'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Cylon aying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('purple', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Cylon finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('purple', false);\n\t\t\t}\n\t\t});\n\t\t\n\t\tSay.queue({\n\t\t\ttext: \"we are the borg\",\n\t\t\tscope: this.scopes.brown,\n\t\t\toptions: {\n\t\t\t\tprofile: 'Borg',\n\t\t\t\tlanguage: 'en'\n\t\t\t},\n\t\t\tonStart: () => {\n\t\t\t\tconsole.log('Borg aying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('brown', true);\n\t\t\t},\n\t\t\tonStop: () => {\n\t\t\t\tconsole.log('Borg finished saying: ', this.text);\n\t\t\t\tthis.setActiveSpeaker('brown', false);\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n}\n\nexport default MultipleSpeakersApp;\n","var _classCallCheck = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/inherits\");\n\n// TODO: add window.speechSynthesis support, synthetic visualization based on syllable count\n// https://codepen.io/matt-west/pen/wGzuJ\n// msg = new SpeechSynthesisUtterance(); msg.text = \"hello world\";  speechSynthesis.speak(msg);\nvar EventEmitter = require('events');\n\nvar async = require('async');\n\nvar SayQueue = require('./queue');\n\nvar profiles = require('./profiles');\n\nvar MonauralScope = require('./monauralscope');\n\nfunction getAudioContext() {\n  var audioContext;\n\n  if (window.AudioContext) {\n    audioContext = new window.AudioContext();\n  } else if (window.webkitAudioContext) {\n    console.log('creating webkitAudioContext');\n    audioContext = new window.webkitAudioContext();\n  } else {\n    throw new Error('no AudioContext');\n    return;\n  }\n\n  return audioContext;\n}\n\nvar variants = ['f1', 'f2', 'f3', 'f4', 'f5', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'croak', 'klatt', 'klatt2', 'klatt3', 'whisper', 'whisperf'];\nvar languageIds = {\n  'ca': 'Catalan',\n  'cs': 'Czech',\n  'de': 'German',\n  'el': 'Greek',\n  'en/en': 'English',\n  'en/en-n': 'English (N)',\n  'en/en-rp': 'English (RP)',\n  'en/en-sc': 'English (Scottish)',\n  'en/en-us': 'English (US)',\n  'en/en-wm': 'English (WM)',\n  'eo': 'Esperanto',\n  'es': 'Spanish',\n  'es-la': 'Spanish (Latin America)',\n  'fi': 'Finnish',\n  'fr': 'French',\n  'hu': 'Hungarian',\n  'it': 'Italian',\n  'kn': 'Kannada',\n  'la': 'Latin',\n  'lv': 'Latvian',\n  'nl': 'Dutch',\n  'pl': 'Polish',\n  'pt': 'Portuguese (Brazil)',\n  'pt-pt': 'Portuguese, European',\n  'ro': 'Romanian',\n  'sk': 'Slovak',\n  'sv': 'Swedish',\n  'tr': 'Turkish',\n  'zh': 'Chinese (Mandarin)',\n  'zh-yue': 'Chinese (Cantonese)'\n};\n\nfunction makeReplacements(text, corrections) {\n  if (typeof corrections === 'object') {\n    var _loop = function _loop(key) {\n      var r = '(?<=\\\\s|^)(' + corrections[key] + ')(?=\\\\s|$)';\n      var regex = new RegExp(r, 'i');\n      var match = regex.test(text);\n\n      if (match) {\n        text = text.replace(new RegExp(r, 'gi'), function (m, a) {\n          return key;\n        });\n      }\n    };\n\n    for (var key in corrections) {\n      _loop(key);\n    }\n\n    return text;\n  }\n}\n\nvar Say =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(Say, _EventEmitter);\n\n  function Say(options) {\n    var _this;\n\n    _classCallCheck(this, Say);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Say).call(this));\n    if (!options) options = {};\n    _this.lang = null;\n    _this.profiles = {};\n    _this.defaultProfile = null;\n\n    for (var name in profiles) {\n      _this.addProfile(profiles[name]);\n    }\n\n    if (options.profile) {\n      _this.setProfile(options.profile);\n    } else {\n      _this.setProfile('Jack');\n    }\n\n    if (_this.profile.engine === 'espeak') {\n      if (options.language) {\n        _this.setLanguage(options.language);\n      }\n    }\n\n    if (!_this.lang) {\n      _this.setLanguage('en_us');\n    }\n\n    if (options.visualizer) {\n      _this.setVisualizer(options.visualizer);\n    }\n\n    return _this;\n  }\n\n  _createClass(Say, [{\n    key: \"setVisualizer\",\n    value: function setVisualizer(vis) {\n      this.visualizer = vis;\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(lang) {\n      this.lang = Say.getLanguageId(lang);\n    }\n  }, {\n    key: \"processOptions\",\n    value: function processOptions(text, options) {\n      if (!options) {\n        options = {};\n      }\n\n      var profileName = options.profile ? options.profile : this.defaultProfile;\n      var profile = this.profiles[profileName]['default'];\n      var v = Object.assign({}, profile);\n      if (options.slow) v.speed = this.profiles[profileName]['slow'].speed;\n      if (options.fast) v.speed = this.profiles[profileName]['fast'].speed;\n      if (options.low) v.pitch = this.profiles[profileName]['low'].pitch;\n      if (options.high) v.pitch = this.profiles[profileName]['high'].pitch;\n      if ('pitch' in options) v.pitch = options.pitch;\n      if ('speed' in options) v.speed = options.speed;\n      if ('wordgap' in options) v.wordgap = options.wordgap;\n      if ('amplitude' in options) v.amplitude = options.amplitude;\n\n      if (options.language) {\n        v.voice = Say.getLanguageId(options.language);\n      } else {\n        v.voice = this.lang;\n      }\n\n      if (options.delay) {\n        v.delay = options.delay;\n      }\n\n      if (options.replacements) {\n        v.replacementText = makeReplacements(text, options.replacements);\n      }\n\n      return v;\n    }\n  }, {\n    key: \"say\",\n    value: function say(text, options) {\n      var _this2 = this;\n\n      options = options || {};\n\n      if (this.visualizer) {\n        return new Promise(function (resolve) {\n          _this2.getWorkerAudioData(text, options, function (audioContext, source) {\n            _this2.visualizer.loadAudioData(audioContext, source, resolve);\n          });\n        });\n      } else {\n        return new Promise(function (resolve) {\n          _this2.getWorkerAudioData(text, options, function (audioContext, source) {\n            if (options.profile === 'Borg') {\n              var audioBuffer = source.buffer; // attempt to mitigate audio click/pops at the end of the clip using a gain node\n\n              var gainNode = audioContext.createGain();\n              gainNode.gain.setValueAtTime(1, 0);\n              gainNode.gain.setValueAtTime(1, audioBuffer.duration - 0.5);\n              gainNode.gain.linearRampToValueAtTime(0.0001, audioBuffer.duration - 0.2);\n              source.connect(gainNode);\n              gainNode.connect(audioContext.destination);\n              var didexit = false;\n              setTimeout(function () {\n                if (!didexit) {\n                  didexit = true; // stopping early seems to help with click/pops as well\n\n                  source.stop();\n                  audioContext.close();\n                  resolve();\n                }\n              }, audioBuffer.duration * 1000 - 200); // stop 0.2s early\n\n              source.onended = function () {\n                if (!didexit) {\n                  didexit = true;\n                  audioContext.close();\n                  resolve();\n                }\n              };\n\n              source.start(0);\n            } else {\n              source.connect(audioContext.destination);\n\n              source.onended = function () {\n                audioContext.close();\n                resolve();\n              };\n\n              source.start(0);\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"getWorkerAudioData\",\n    value: function getWorkerAudioData(text, options, callback) {\n      text = text.toLowerCase();\n      if (!options) options = {};\n      var profileName = options.profile || this.defaultProfile;\n\n      if (profileName === 'Borg') {\n        this.borgGetAudioData(text, options, callback);\n      } else {\n        if (!profileName) profileName = 'Jack';\n        var profile = this.profiles[profileName];\n\n        if (!profile) {\n          throw new Error('no profile: ' + profileName);\n        }\n\n        var engine = profile.engine;\n        var workerPath;\n\n        if (engine === 'sam') {\n          workerPath = Say.workers.sam;\n        } else if (engine === 'espeak') {\n          if (typeof Say.workers.espeak === 'string') {\n            workerPath = Say.workers.espeak;\n          } else if (Say.workers.espeak.length) {\n            var lang = options.language;\n\n            if (lang.startsWith('en-')) {\n              lang = 'en/' + l;\n            }\n\n            for (var i = 0; i < Say.workers.espeak.length; i++) {\n              if (Say.workers.espeak[i].language === lang) {\n                workerPath = Say.workers.espeak[i].path;\n                break;\n              }\n            }\n          }\n        }\n\n        if (!workerPath) throw new Error('no worker path for this language');\n        var worker = new Worker(workerPath);\n        worker.addEventListener('message', function (e) {\n          console.log('received from worker:', e.data);\n\n          if (e.data.rawdata) {\n            var audioContext = getAudioContext();\n\n            if (!audioContext || !audioContext.createBufferSource) {\n              console.log('no audioContext 2');\n              debugger;\n              return;\n            }\n\n            var source = audioContext.createBufferSource();\n            var data = e.data.rawdata;\n\n            if (options.rawAudioData) {\n              callback(data);\n            } else {\n              if (engine === 'sam') {\n                var audioBuffer = audioContext.createBuffer(1, data.length, 22050);\n                var buffer = audioBuffer.getChannelData(0);\n\n                for (var _i = 0; _i < data.length; _i++) {\n                  buffer[_i] = data[_i];\n                }\n\n                source.buffer = audioBuffer;\n                console.log('returning sam');\n                callback(audioContext, source);\n              } else {\n                audioContext.decodeAudioData(data, function (buffer) {\n                  source.buffer = buffer;\n                  callback(audioContext, source);\n                }, function (e) {\n                  console.log('error', e);\n                });\n              }\n            }\n          }\n        }, false);\n        var voptions = this.processOptions(text, options);\n        worker.postMessage({\n          cmd: 'speak',\n          text: text,\n          options: voptions\n        });\n      }\n    }\n  }, {\n    key: \"addProfile\",\n    value: function addProfile(profile) {\n      var profileTypes = ['high', 'low', 'fast', 'slow'];\n      profileTypes.forEach(function (type) {\n        if (type !== 'default' && type !== 'name') {\n          var p = Object.assign({}, profile['default']);\n\n          for (var i in profile[type]) {\n            p[i] = profile[type][i];\n          }\n\n          profile[type] = p;\n        }\n      });\n      this.profiles[profile.name] = profile;\n    }\n  }, {\n    key: \"setProfile\",\n    value: function setProfile(name) {\n      this.defaultProfile = name;\n      this.profile = profiles[name];\n      return this;\n    }\n  }, {\n    key: \"borgGetAudioData\",\n    value: function borgGetAudioData(text, options, callback) {\n      var _this3 = this;\n\n      text += '....'; // add some silence to the end\n\n      var voices = [];\n      var lang = options && options.language ? options.language : this.lang;\n      var audioContext = getAudioContext();\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Jack',\n          language: lang,\n          speed: 160,\n          pitch: 1,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Jack',\n          language: lang,\n          speed: 160,\n          pitch: 40,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Roy',\n          language: lang,\n          speed: 160,\n          pitch: 30,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Roy',\n          language: lang,\n          speed: 160,\n          pitch: 30,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Leon',\n          language: lang,\n          speed: 160,\n          pitch: 20,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      voices.push(function (callback) {\n        _this3.getWorkerAudioData(text, {\n          profile: 'Xenu',\n          language: lang,\n          speed: 166,\n          pitch: 5,\n          rawAudioData: true\n        }, function (data) {\n          audioContext.decodeAudioData(data, function (buffer) {\n            callback(null, [data, buffer]);\n          });\n        });\n      });\n      async.parallel(voices, function (err, results) {\n        if (results) {\n          var maxLength = 0;\n          var maxDuration = 0;\n          var sampleRate = 0;\n          results.forEach(function (result) {\n            var buffer = result[1];\n            maxLength = Math.max(maxLength, buffer.length);\n            maxDuration = Math.max(maxDuration, buffer.duration);\n            sampleRate = buffer.sampleRate;\n          });\n\n          var _audioContext = getAudioContext();\n\n          var audioBuffer = _audioContext.createBuffer(2, sampleRate * maxDuration, sampleRate);\n\n          var channgelToggle = false;\n          results.forEach(function (result) {\n            var buffer = result[1];\n\n            if (channgelToggle) {\n              var leftInBuffer = buffer.getChannelData(0);\n              var leftOutBuffer = audioBuffer.getChannelData(0);\n\n              for (var i = 0; i < maxLength; i++) {\n                if (i > leftOutBuffer.length) leftOutBuffer[i] = 0;\n                leftOutBuffer[i] += leftInBuffer[i];\n              }\n            } else {\n              var rightInBuffer = buffer.getChannelData(0);\n              var rightOutBuffer = audioBuffer.getChannelData(1);\n\n              for (var _i2 = 0; _i2 < maxLength; _i2++) {\n                if (_i2 > rightInBuffer.length) rightOutBuffer[_i2] = 0;else rightOutBuffer[_i2] += rightInBuffer[_i2];\n              }\n            }\n\n            channgelToggle = !channgelToggle;\n          });\n\n          var source = _audioContext.createBufferSource();\n\n          source.buffer = audioBuffer;\n          callback(_audioContext, source);\n        }\n      });\n    }\n  }]);\n\n  return Say;\n}(EventEmitter);\n\nSay.variants = variants;\nSay.profiles = profiles;\nSay.languageIds = languageIds;\n\nSay.getLanguageId = function (lang) {\n  if (lang.indexOf('_') > -1) lang = lang.replace('_', '-');\n  if (lang.startsWith('en') && lang.indexOf('/') === -1) lang = 'en/' + lang;\n  return lang;\n};\n\nSay.addProfile = function (profile) {\n  for (var name in profile) {\n    Say.profiles[name] = profile[name];\n  }\n};\n\nSay.setWorkers = function (workers) {\n  Say.workers = workers;\n};\n\nvar sayQueue = new SayQueue(new Say());\nSay.queue = sayQueue.queue.bind(sayQueue);\nSay.clearQueue = sayQueue.clearQueue.bind(sayQueue);\nSay.on = sayQueue.on.bind(sayQueue);\nSay.once = sayQueue.once.bind(sayQueue);\nmodule.exports = Say;\nmodule.exports.MonauralScope = MonauralScope;","var _classCallCheck = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/inherits\");\n\nvar EventEmitter = require(\"events\");\n\nvar SpeakerQueue =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(SpeakerQueue, _EventEmitter);\n\n  function SpeakerQueue(speak) {\n    var _this;\n\n    _classCallCheck(this, SpeakerQueue);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SpeakerQueue).call(this));\n    _this._queue = [];\n    _this.speaker = speak;\n    return _this;\n  }\n\n  _createClass(SpeakerQueue, [{\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      this._queue = [];\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(speech) {\n      this._queue.push(speech);\n\n      this._speakNext();\n    }\n  }, {\n    key: \"_speakNext\",\n    value: function _speakNext() {\n      var _this2 = this;\n\n      if (this.isSpeaking) {\n        return;\n      }\n\n      var next = this._queue.shift();\n\n      if (next) {\n        this.isSpeaking = true;\n        this.speaker.getWorkerAudioData(next.text, next.options, function (audioContext, source) {\n          if (next.onStart) {\n            next.onStart(next);\n          }\n\n          next.scope.loadAudioData(audioContext, source, function () {\n            if (next.onStop) {\n              setTimeout(function () {\n                next.onStop(next);\n              }, 1);\n            }\n\n            _this2._onEnded();\n          });\n        });\n      } else {\n        this.emit('finish');\n      }\n    }\n  }, {\n    key: \"_onEnded\",\n    value: function _onEnded() {\n      this.isSpeaking = false;\n\n      this._speakNext();\n    }\n  }]);\n\n  return SpeakerQueue;\n}(EventEmitter);\n\nmodule.exports = SpeakerQueue;","module.exports = {\n  \"Jack\": {\n    \"name\": \"Jack\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 10,\n      speed: 180,\n      variant: 'm2'\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 0\n    },\n    \"slow\": {\n      speed: 120\n    },\n    \"fast\": {\n      speed: 250\n    }\n  },\n  \"Pris\": {\n    \"name\": \"Pris\",\n    \"phoneticName\": \"Priss\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 47,\n      speed: 130,\n      variant: 'f5'\n    },\n    \"high\": {\n      pitch: 80\n    },\n    \"low\": {\n      pitch: 20\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Roy\": {\n    \"name\": \"Roy\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 35,\n      speed: 180,\n      variant: 'm1'\n    },\n    \"high\": {\n      pitch: 3\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Scotty\": {\n    \"name\": \"Scotty\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 35,\n      speed: 200,\n      variant: 'm3'\n    },\n    \"high\": {\n      pitch: 3\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 230\n    }\n  },\n  \"Xenu\": {\n    \"name\": \"Xenu\",\n    \"phoneticName\": \"zee-new\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 1,\n      pitch: 35,\n      speed: 170,\n      variant: 'klatt3'\n    },\n    \"high\": {\n      pitch: 65\n    },\n    \"low\": {\n      pitch: 0\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Cylon\": {\n    \"name\": \"Cylon\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 1,\n      pitch: 35,\n      speed: 170,\n      variant: 'whisperf'\n    },\n    \"high\": {\n      pitch: 65,\n      speed: 150\n    },\n    \"low\": {\n      pitch: 0,\n      speed: 140\n    },\n    \"slow\": {\n      pitch: 20,\n      speed: 100,\n      wordgap: 1\n    },\n    \"fast\": {\n      speed: 200,\n      wordgap: 0\n    }\n  },\n  \"Leon\": {\n    \"name\": \"Leon\",\n    \"phoneticName\": \"Leeon\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 40,\n      speed: 150,\n      variant: 'm7'\n    },\n    \"high\": {\n      pitch: 55\n    },\n    \"low\": {\n      pitch: 5\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Rachel\": {\n    \"name\": \"Rachel\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 60,\n      speed: 150,\n      variant: 'f2'\n    },\n    \"high\": {\n      pitch: 75\n    },\n    \"low\": {\n      pitch: 40\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Zhora\": {\n    \"name\": \"Zhora\",\n    \"engine\": \"espeak\",\n    \"default\": {\n      amplitude: 100,\n      wordgap: 0,\n      pitch: 60,\n      speed: 150,\n      variant: 'f4'\n    },\n    \"high\": {\n      pitch: 75\n    },\n    \"low\": {\n      pitch: 40\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 200\n    }\n  },\n  \"Borg\": {\n    \"name\": \"Borg\",\n    \"engine\": \"espeak\",\n    \"default\": {}\n  },\n  \"Sam\": {\n    \"name\": \"Sam\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 64,\n      pitch: 64,\n      throat: 128,\n      mouth: 128\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 110\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 40\n    }\n  },\n  \"Elf\": {\n    \"name\": \"Elf\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 72,\n      pitch: 64,\n      throat: 110,\n      mouth: 160\n    },\n    \"high\": {\n      pitch: 50\n    },\n    \"low\": {\n      pitch: 110\n    },\n    \"slow\": {\n      speed: 100\n    },\n    \"fast\": {\n      speed: 40\n    }\n  },\n  \"Robo\": {\n    \"name\": \"Robo\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 82,\n      pitch: 60,\n      throat: 190,\n      mouth: 190\n    },\n    \"high\": {\n      pitch: 40\n    },\n    \"low\": {\n      pitch: 100\n    },\n    \"slow\": {\n      speed: 120\n    },\n    \"fast\": {\n      speed: 50\n    }\n  },\n  \"Granny\": {\n    \"name\": \"Granny\",\n    \"engine\": \"sam\",\n    \"default\": {\n      speed: 82,\n      pitch: 35,\n      throat: 145,\n      mouth: 145\n    },\n    \"high\": {\n      pitch: 25\n    },\n    \"low\": {\n      pitch: 120\n    },\n    \"slow\": {\n      speed: 130\n    },\n    \"fast\": {\n      speed: 40\n    }\n  }\n};","var _classCallCheck = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/dstein/dev/jaxcore/jaxcore-say/examples/multiplevoices-example/node_modules/@babel/runtime/helpers/inherits\");\n\nvar EventEmitter = require(\"events\");\n\nvar MonauralScope =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(MonauralScope, _EventEmitter);\n\n  function MonauralScope(canvas, options) {\n    var _this;\n\n    _classCallCheck(this, MonauralScope);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MonauralScope).call(this));\n    if (!options) options = {};\n    _this.canvas = canvas;\n    _this.width = _this.canvas.width;\n    _this.height = _this.canvas.height;\n    _this.audioContext = null;\n    _this.meter = null;\n    _this.mediaStreamSource = null;\n    _this._draw = _this.draw.bind(_assertThisInitialized(_this));\n    _this.isRecording = false;\n\n    _this.setTheme({\n      lineWidth: options.lineWidth || 3,\n      strokeColor: options.strokeColor || '#FF0000',\n      clipColor: options.clipColor || options.strokeColor || '#FF0000',\n      fillColor: options.fillColor || 'rgba(255,0,0,0.1)',\n      bgOnColor: options.bgOnColor || null,\n      bgOffColor: options.bgOffColor || null,\n      dotColor: options.dotColor || '#FF0000',\n      dotSize: options.dotSize || 3,\n      background: options.background || null\n    });\n\n    return _this;\n  }\n\n  _createClass(MonauralScope, [{\n    key: \"setTheme\",\n    value: function setTheme(options) {\n      this.theme = options;\n      this.draw();\n    }\n  }, {\n    key: \"createAudioMeter\",\n    value: function createAudioMeter(audioContext, clipLevel, averaging, clipLag) {\n      // this.audioContext = audioContext;\n      var processor = audioContext.createScriptProcessor(512); //this.processor = processor;\n\n      processor.onaudioprocess = function (event) {\n        var buf = event.inputBuffer.getChannelData(0);\n        var bufLength = buf.length;\n        var sum = 0;\n        var x; // Do a root-mean-square on the samples: sum up the squares...\n\n        for (var i = 0; i < bufLength; i++) {\n          x = buf[i];\n\n          if (Math.abs(x) >= this.clipLevel) {\n            this.clipping = true;\n            this.lastClip = window.performance.now();\n          }\n\n          sum += x * x;\n        } // ... then take the square root of the sum.\n\n\n        var rms = Math.sqrt(sum / bufLength); // Now smooth this out with the averaging factor applied\n        // to the previous sample - take the max here because we\n        // want \"fast attack, slow release.\"\n\n        this.volume = Math.max(rms, this.volume * this.averaging); // console.log('onaudioprocess', this.volume);\n\n        if (!this.maxVolume) this.maxVolume = this.volume;\n        this.maxVolume = Math.max(this.volume, this.maxVolume);\n      };\n\n      processor.clipping = false;\n      processor.lastClip = 0;\n      processor.volume = 0;\n      processor.clipLevel = clipLevel || 0.99; //0.98;\n\n      processor.averaging = averaging || 0.97; //0.95;\n\n      processor.clipLag = clipLag || 500; //750;\n\n      processor.connect(audioContext.destination);\n\n      processor.checkClipping = function () {\n        if (!this.clipping) return false;\n        if (this.lastClip + this.clipLag < window.performance.now()) this.clipping = false;\n        return this.clipping;\n      };\n\n      processor.shutdown = function () {\n        this.disconnect();\n        this.onaudioprocess = null;\n      };\n\n      return processor;\n    }\n  }, {\n    key: \"setIsRecording\",\n    value: function setIsRecording(isRecording) {\n      if (this.isRecording === isRecording) {\n        console.log('same');\n        return;\n      }\n\n      this.isRecording = isRecording;\n      if (isRecording) this.startRecording();else this.stopRecording();\n    }\n  }, {\n    key: \"stopRecording\",\n    value: function stopRecording() {\n      if (this.isRecording) {\n        // if (this.audioContext) {\n        // \tif (this.meter) {\n        // \t\tthis.meter.disconnect(this.audioContext.destination);\n        // \t}\n        // } else {\n        // \tconsole.log('error: no audioContext');\n        // }\n        if (this.mediaStreamSource && this.meter) {\n          this.mediaStreamSource.disconnect(this.meter);\n        }\n\n        if (this.meter) {\n          this.meter.shutdown();\n        }\n\n        if (this.audioContext) {\n          this.audioContext.close();\n        }\n      }\n\n      this.isRecording = false;\n      this.isDrawing = false;\n    } // start and stop the mic to bring up the request dialog\n\n  }, {\n    key: \"requestMic\",\n    value: function requestMic() {\n      var _this2 = this;\n\n      this.startRecording(function () {\n        // sucess\n        _this2.stopRecording();\n      }, function () {\n        // error\n        _this2.stopRecording();\n      });\n    }\n  }, {\n    key: \"startRecording\",\n    value: function startRecording(successcb, errorcb) {\n      var _this3 = this;\n\n      if (this.isRecording) {\n        console.log('already recording');\n        return;\n      }\n\n      console.log('startRecording');\n      this.isRecording = true;\n\n      var _AudioContext = window.AudioContext || window.webkitAudioContext;\n\n      var audioContext = new _AudioContext();\n      this.audioContext = audioContext;\n\n      var success = function success(stream) {\n        console.log('startRecording success');\n\n        if (_this3.audioContext) {\n          try {\n            _this3.mediaStreamSource = audioContext.createMediaStreamSource(stream);\n            _this3.meter = _this3.createAudioMeter(audioContext);\n\n            _this3.mediaStreamSource.connect(_this3.meter);\n\n            _this3.startDrawing();\n\n            if (successcb) successcb();\n          } catch (e) {\n            if (errorcb) errorcb();\n          }\n        }\n      };\n\n      var fail = function fail(e) {\n        console.log('startRecording fail'); //debugger;\n\n        if (errorcb) errorcb();\n      };\n\n      try {\n        // let getUserMedia = get_user_media || navigator.webkitGetUserMedia;\n        // get_user_media = get_user_media || navigator.mozGetUserMedia;\n        // let getUserMedia = navigator.getUserMedia || (navigator.webkitGetUserMedia || navigator.mediaDevices.getUserMedia);\n        if (navigator.getUserMedia) {\n          navigator.getUserMedia({\n            \"audio\": {\n              \"mandatory\": {\n                \"googEchoCancellation\": \"false\",\n                \"googAutoGainControl\": \"false\",\n                \"googNoiseSuppression\": \"false\",\n                \"googHighpassFilter\": \"false\"\n              },\n              \"optional\": []\n            }\n          }, success, fail);\n        } else {\n          if (navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices.getUserMedia({\n              \"audio\": {\n                \"mandatory\": {\n                  \"googEchoCancellation\": \"false\",\n                  \"googAutoGainControl\": \"false\",\n                  \"googNoiseSuppression\": \"false\",\n                  \"googHighpassFilter\": \"false\"\n                },\n                \"optional\": []\n              }\n            }, success, fail);\n          } else {\n            throw new Error('no getUserMedia');\n            return;\n          }\n        }\n      } catch (e) {\n        alert('getUserMedia threw exception :' + e);\n      }\n    }\n  }, {\n    key: \"loadAudioData\",\n    value: function loadAudioData(audioContext, source, callback) {\n      var _this4 = this;\n\n      this.audioContext = audioContext;\n      this.source = source;\n      source.connect(audioContext.destination);\n      var meter = this.createAudioMeter(audioContext);\n      this.meter = meter;\n      source.connect(this.meter);\n\n      source.onended = function () {\n        _this4.isPlaying = false; // source.disconnect(audioContext.destination);\n\n        source.disconnect();\n        delete source.buffer; // this.meter.shutdown();\n\n        source.stop();\n\n        _this4.stopDrawing();\n\n        audioContext.close(); // source.disconnect();\n\n        if (callback) callback();\n      };\n\n      this.isPlaying = true;\n      this.startDrawing();\n      source.start(0);\n    }\n  }, {\n    key: \"startDrawing\",\n    value: function startDrawing() {\n      this.isDrawing = true;\n      this.draw();\n    }\n  }, {\n    key: \"stopDrawing\",\n    value: function stopDrawing() {\n      this.meter.volume = 0;\n      this.draw();\n      this.isDrawing = false;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      if (!this.canvas) {\n        console.log('no canvas');\n        return;\n      }\n\n      var ctx = this.canvas.getContext('2d');\n\n      if (this.theme.background) {\n        ctx.fillStyle = this.theme.background;\n        ctx.fillRect(0, 0, this.width, this.height);\n      } else {\n        ctx.clearRect(0, 0, this.width, this.height);\n      }\n\n      if (this.theme.bgOnColor || this.theme.bgOffColor) {\n        var maxsize = Math.min(this.width, this.height) / 2 - ctx.lineWidth;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, maxsize, 0, 2 * Math.PI, false);\n        ctx.fillStyle = this.isPlaying || this.isRecording ? this.theme.bgOnColor : this.theme.bgOffColor;\n        ctx.fill();\n        ctx.closePath();\n      }\n\n      ctx.lineWidth = this.theme.lineWidth;\n\n      if (this.theme.dotSize) {\n        var size = this.theme.dotSize;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, size, 0, 2 * Math.PI, false);\n        ctx.fillStyle = this.theme.dotColor;\n        ctx.fill();\n        ctx.closePath();\n      }\n\n      if (!this.isRecording && !this.isDrawing) {\n        console.log('not drawing');\n      } else {\n        // console.log('IS drawing ', this.meter.volume);\n        if (!this.meter) {\n          console.error('no meter'); // this.startDrawing();\n          // this.startRecording();\n\n          return;\n        }\n\n        ctx.strokeStyle = this.meter.checkClipping() ? this.theme.clipColor : this.theme.strokeColor;\n\n        var _maxsize = Math.min(this.width, this.height) / 2 - ctx.lineWidth;\n\n        var _size = this.meter.volume * _maxsize * 5;\n\n        if (_size > this.width / 2 - this.theme.lineWidth) _size = this.width / 2 - this.theme.lineWidth;\n        ctx.beginPath();\n        ctx.arc(this.width / 2, this.height / 2, _size, 0, 2 * Math.PI, false);\n\n        if (this.theme.fillColor) {\n          ctx.fillStyle = this.theme.fillColor;\n          ctx.fill();\n        }\n\n        ctx.stroke();\n        ctx.closePath();\n\n        if (this.isDrawing) {\n          window.requestAnimationFrame(this._draw);\n        }\n      }\n    }\n  }]);\n\n  return MonauralScope;\n}(EventEmitter);\n\nmodule.exports = MonauralScope;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport MultipleSpeakersApp from './MultipleSpeakersApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<MultipleSpeakersApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}